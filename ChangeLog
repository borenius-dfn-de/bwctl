------------------------------------------------------------------------
r518 | aaron | 2009-01-20 16:55:31 -0500 (Tue, 20 Jan 2009) | 3 lines

Update the man2html part of the Makefile and point the externals.txt to the new location.


------------------------------------------------------------------------
r517 | aaron | 2009-01-20 09:36:51 -0500 (Tue, 20 Jan 2009) | 3 lines

Update the documentation with Susan's edits.


------------------------------------------------------------------------
r516 | aaron | 2009-01-20 08:02:10 -0500 (Tue, 20 Jan 2009) | 8 lines

Truncate the PID file before printing the PID to it. This fixes an issue where a high PID process would get restarted and the new instance would have with a low PID. The pid file would then look like:

283
8

This would not work all that well.


------------------------------------------------------------------------
r515 | aaron | 2009-01-14 13:56:55 -0500 (Wed, 14 Jan 2009) | 3 lines

Make sure all the documentation is included.


------------------------------------------------------------------------
r514 | aaron | 2009-01-14 08:53:46 -0500 (Wed, 14 Jan 2009) | 3 lines

Document that the various _port configuration options should be set to a range.


------------------------------------------------------------------------
r513 | aaron | 2009-01-12 07:48:33 -0500 (Mon, 12 Jan 2009) | 3 lines

Add the bwctl infosheet PDF to the doc directory


------------------------------------------------------------------------
r512 | aaron | 2009-01-12 07:40:03 -0500 (Mon, 12 Jan 2009) | 3 lines

Update the thrulay website in the documentation


------------------------------------------------------------------------
r511 | aaron | 2009-01-09 13:03:28 -0500 (Fri, 09 Jan 2009) | 3 lines

Minor documentation updates.


------------------------------------------------------------------------
r510 | aaron | 2009-01-09 11:39:06 -0500 (Fri, 09 Jan 2009) | 3 lines

Minor updates for the man pages.


------------------------------------------------------------------------
r509 | aaron | 2009-01-06 10:24:01 -0500 (Tue, 06 Jan 2009) | 3 lines

Minor wording fixes in the ntp description


------------------------------------------------------------------------
r508 | aaron | 2009-01-06 09:56:34 -0500 (Tue, 06 Jan 2009) | 5 lines

Add a bwctlrc man page and convert the bwctld.conf to share the configuration options section with bwctlrc
Add a brief thing on NTP configuration
Have the index.html link to the firewalls html page


------------------------------------------------------------------------
r507 | aaron | 2008-12-18 15:07:59 -0500 (Thu, 18 Dec 2008) | 3 lines

Minor spec file updates


------------------------------------------------------------------------
r506 | aaron | 2008-12-18 13:27:51 -0500 (Thu, 18 Dec 2008) | 4 lines

Update the release todo slightly
Update the changes, merging all the rc*s into a single 1.3


------------------------------------------------------------------------
r505 | aaron | 2008-12-18 13:01:26 -0500 (Thu, 18 Dec 2008) | 5 lines

Update the TODO
Swap the version # to 1.3 instead of 1.3rc6
Make the RPM server depend on the I2util rpm since it has some tools we need


------------------------------------------------------------------------
r504 | aaron | 2008-12-18 10:42:02 -0500 (Thu, 18 Dec 2008) | 5 lines

For the bwctl client, only set the AllowUnsync variable if it's not already set to true. This prevents it from overriding a user configured "allow_unsync" with false if they haven't specified a sync fuzz. 

Only warn about swapping 'localhost' for a different address in the case where a fake daemon isn't being used.


------------------------------------------------------------------------
r503 | aaron | 2008-12-17 16:17:06 -0500 (Wed, 17 Dec 2008) | 3 lines

Add some helper functions to avoid copying the I2Addr unnecessarily when doing the loopback checks in bwctl.c


------------------------------------------------------------------------
r502 | aaron | 2008-12-17 15:28:31 -0500 (Wed, 17 Dec 2008) | 3 lines

Use the recently added convenience function I2AddrIsLoopback instead of rolling my own.


------------------------------------------------------------------------
r501 | aaron | 2008-12-17 14:13:49 -0500 (Wed, 17 Dec 2008) | 11 lines

Fix for when a client is doing a third party test to an ipv6/ipv4 enabled host
and an ipv4 enabled host. The client would forget the ipv6 host's ipv4 address,
leading to a connect failure when it tried to coordinate addresses for the
other servers to use.

Enable users to do a third party test in which one of the specified hosts is on the local machine.
e.g. "bwctl -c localhost:1234 -s nms-rthr2.chic.net.internet2.edu" should now work.

Minor other changes


------------------------------------------------------------------------
r500 | aaron | 2008-10-29 14:16:19 -0400 (Wed, 29 Oct 2008) | 4 lines

Minor changes to the release todo
Update configure.ac and doc/Makefile.am to support converting the man pages to html if man2html is found.


------------------------------------------------------------------------
r499 | boote | 2008-10-20 20:38:02 -0400 (Mon, 20 Oct 2008) | 8 lines

bwctl.man
    Tried to clarify max_time_error 'a little'.
    typos

index.html
    Added Chris Tracy to 'thanks' section.


------------------------------------------------------------------------
r498 | aaron | 2008-10-15 08:28:32 -0400 (Wed, 15 Oct 2008) | 3 lines

Include the LICENSE file when a make dist is done


------------------------------------------------------------------------
r497 | aaron | 2008-10-14 17:16:49 -0400 (Tue, 14 Oct 2008) | 3 lines

A quick edit pass updating the "index.html" documentation. 


------------------------------------------------------------------------
r496 | aaron | 2008-10-14 16:42:28 -0400 (Tue, 14 Oct 2008) | 3 lines

Update the documentation to use Susan Topol's fancy architecture pictures


------------------------------------------------------------------------
r495 | aaron | 2008-10-14 16:20:18 -0400 (Tue, 14 Oct 2008) | 5 lines

Some minor documentation updates
Bump the version number to 1.3rc5
Include a license file and include that license in all the .c and .h files


------------------------------------------------------------------------
r494 | aaron | 2008-10-09 13:08:56 -0400 (Thu, 09 Oct 2008) | 3 lines

Update the included firewall documentation.


------------------------------------------------------------------------
r493 | aaron | 2008-10-09 12:27:47 -0400 (Thu, 09 Oct 2008) | 11 lines

Some bwctl manpage updates:

bwctl.man
 describes -T/-y/-f options
 includes a reference to max_time_error in -a documentation

bwctld.conf.man
 removes 'datadir' from bwctld.conf manpage
 adds post_hook directive documentation


------------------------------------------------------------------------
r492 | aaron | 2008-10-07 14:54:22 -0400 (Tue, 07 Oct 2008) | 4 lines

Use the access_priority configuration option for the error messages specifying
why access was denied.


------------------------------------------------------------------------
r491 | aaron | 2008-10-06 10:23:28 -0400 (Mon, 06 Oct 2008) | 4 lines

Minor fixes to some 'unknown' error messages to debug. This keeps messages from
accidently being put in the syslog 'emergency' category.


------------------------------------------------------------------------
r490 | boote | 2008-10-02 03:12:46 -0400 (Thu, 02 Oct 2008) | 7 lines

Fixed cosmetic issue effecting 'ps' listings...
StrToByte function was modifying the string passed in by terminating
the string at the 'units' char. (It so happened that the string passed
in was in the argv list, so someone looking at 'ps' would then think
that the 'units' for the -w or -W or -l flag was incorrect somehow.


------------------------------------------------------------------------
r489 | boote | 2008-08-27 15:56:28 -0400 (Wed, 27 Aug 2008) | 5 lines

Fix bash syntax for string compare in configure.ac.

jeff


------------------------------------------------------------------------
r488 | aaron | 2008-07-25 11:23:35 -0400 (Fri, 25 Jul 2008) | 4 lines

Display an error when there isn't a common 'security' (authentication?) mode
(usually when the bwctl server requires authentication).


------------------------------------------------------------------------
r487 | aaron | 2008-07-25 09:44:38 -0400 (Fri, 25 Jul 2008) | 3 lines

Have the sample hook handle thrulay output as best it can when it's the sender.


------------------------------------------------------------------------
r486 | aaron | 2008-07-24 15:06:03 -0400 (Thu, 24 Jul 2008) | 6 lines

Update the sample configuration to include examples for nuttcp/thrulay ports/cmds
Update the sample hook to handle multistream thrulay properly
Update the client help screen to show that the -P is no longer ENOTSUPPORT
Move the default externals to point to anonsvn


------------------------------------------------------------------------
r485 | aaron | 2008-07-21 18:55:50 -0400 (Mon, 21 Jul 2008) | 4 lines

Minor compile warning fixes
Update the externals to anonsvn


------------------------------------------------------------------------
r484 | aaron | 2008-07-21 16:07:47 -0400 (Mon, 21 Jul 2008) | 3 lines

Clean up some compile-time warnings 


------------------------------------------------------------------------
r483 | boote | 2008-07-19 10:59:53 -0400 (Sat, 19 Jul 2008) | 4 lines

Only print out the warning message if the fp is non-null. (This helps keep
core files from collecting on your sytem.)


------------------------------------------------------------------------
r482 | aaron | 2008-07-16 16:39:29 -0400 (Wed, 16 Jul 2008) | 3 lines

Use the configured nuttcp/iperf locations when the option is set in the configuration


------------------------------------------------------------------------
r481 | boote | 2008-07-16 13:27:27 -0400 (Wed, 16 Jul 2008) | 2 lines

fix syntax warning...

------------------------------------------------------------------------
r480 | aaron | 2008-07-10 11:26:42 -0400 (Thu, 10 Jul 2008) | 6 lines

Minor changes for the RPM
- have it install the sample hook
- remove the --enable-NUTTCP=no from the configure line
- install pfstore and aespasswd


------------------------------------------------------------------------
r479 | aaron | 2008-07-10 10:56:45 -0400 (Thu, 10 Jul 2008) | 4 lines

Change the BWLTimeStampToTimespec and BWLTimeStampToTimeval to not modify the BWLTimeStamp argument
Modify the sample hook to better handle iperf lines


------------------------------------------------------------------------
r478 | aaron | 2008-07-10 10:16:55 -0400 (Thu, 10 Jul 2008) | 4 lines

Fix the "abnormal termination" error
Remove the Dumper printing in the sample hook


------------------------------------------------------------------------
r477 | aaron | 2008-07-09 17:20:15 -0400 (Wed, 09 Jul 2008) | 7 lines

Document the posthook option in the example .conf file
Add more data to the output
 - start time, tos, client ip
Update changes, changelog
Have the sample hook script call to syslog


------------------------------------------------------------------------
r476 | aaron | 2008-07-09 14:53:30 -0400 (Wed, 09 Jul 2008) | 5 lines

Move sample hook to the contrib directory
Properly order the tools when unspecified (iperf, nuttcp, thrulay)
Use execlp instead of execl when exec'ing the scripts


------------------------------------------------------------------------
r475 | aaron | 2008-07-09 13:28:37 -0400 (Wed, 09 Jul 2008) | 6 lines

Try to validate the posthook script by running it with a --validate flag on
startup. The script must print to stdout "Status: OK" on success, anything else
is considered a failure. It also sets the non-blocking flag when the script is
called.


------------------------------------------------------------------------
r474 | aaron | 2008-07-07 14:00:46 -0400 (Mon, 07 Jul 2008) | 5 lines

Commit initial code for "posthook" processing along with a simple script that
can be used to post-process the results. Needs some more complete
documentation.


------------------------------------------------------------------------
r473 | boote | 2008-06-16 11:36:56 -0400 (Mon, 16 Jun 2008) | 13 lines

bwctld.conf:
    modify peer_ports to peer_port to be consistent with $tool_port
    config params.

tools.c:
daemon.c:
    retrieve $tool_port instead of $tool_ports

endpoint.c:
    fix types for printf vars... (signed vs unsigned)
    


------------------------------------------------------------------------
r472 | boote | 2008-06-13 16:02:25 -0400 (Fri, 13 Jun 2008) | 4 lines

modifying the fuzz to 1.5 seconds.

stupid iperf.

------------------------------------------------------------------------
r471 | aaron | 2008-06-13 15:25:21 -0400 (Fri, 13 Jun 2008) | 3 lines

Properly convert the fuzz to a timeval


------------------------------------------------------------------------
r470 | boote | 2008-06-13 15:22:53 -0400 (Fri, 13 Jun 2008) | 7 lines

endpoint.c:
    Adding diagnostic message for kill's of children into data stream.

sapi.c:
    Increasing fuzz time because iperf receivers exit slowly.


------------------------------------------------------------------------
r469 | aaron | 2008-06-13 15:01:46 -0400 (Fri, 13 Jun 2008) | 3 lines

A temporary fix for when a sender sends fast enough that the receiver iperf isn't done when the stopsession message comes in


------------------------------------------------------------------------
r468 | aaron | 2008-06-13 07:38:39 -0400 (Fri, 13 Jun 2008) | 3 lines

Properly set the tool to use when it is left unset by the user


------------------------------------------------------------------------
r467 | aaron | 2008-06-11 15:40:02 -0400 (Wed, 11 Jun 2008) | 7 lines

1. update the default limits file to allow 20 seconds of slub
2. update the ChangeLog/CHANGES for -rc2
3. update the .spec since we no longer depend on a libthrulay rpm
4. have the bwctl client choose a common tool if one isn't specified
5. make iperf the 'default' common tool


------------------------------------------------------------------------
r465 | aaron | 2008-06-09 16:57:18 -0400 (Mon, 09 Jun 2008) | 3 lines

Fix an issue where the max_time_error wouldn't be properly checked preventing tests from running.


------------------------------------------------------------------------
r464 | aaron | 2008-06-09 16:24:56 -0400 (Mon, 09 Jun 2008) | 4 lines

Update the spec file to deal with the thrulay/i2util files being installed
Add a message about UDP thrulay being non-working


------------------------------------------------------------------------
r463 | boote | 2008-06-07 02:16:10 -0400 (Sat, 07 Jun 2008) | 4 lines

Add the 2 lines of code to the server to allow legacy clients to work
with new servers. (Need to select the IPERF tool by default.)


------------------------------------------------------------------------
r462 | boote | 2008-06-07 01:02:51 -0400 (Sat, 07 Jun 2008) | 6 lines

policy.c: modified to report successful allocations as well as denied ones.

configure.ac: attempt to test for 'trunc' - packrat complains about no
prototype for trunc(). No idea why - I spent too long on it already.


------------------------------------------------------------------------
r461 | boote | 2008-06-06 21:12:35 -0400 (Fri, 06 Jun 2008) | 4 lines

Fix the error message for bandwidth requsts to servers that don't support
the larger limits.


------------------------------------------------------------------------
r460 | boote | 2008-06-06 21:10:18 -0400 (Fri, 06 Jun 2008) | 20 lines

Added lots of numeric conversion warning flags to GCC compile lines, and then
went through and removed 99% of the warnings. (htons gives bogus warnings on
OS X so I couldn't remove them.)

Modified the protocol to support bandwidth limits for UDP of greater than
4.3gbps. I did this by adding an 'exponent' byte into the test request
message - if the server supports the later protocol version, then this
value indicates the number of bits the existing bandwidth word should
be shifted to get the 'real' value requested. (As part of this, added
some better error checking to see if limits that are larger than can
be handled will be detected and reported as an error instead of being
munged by overflow.

Fixed what must have been a long-standing bug in the policy code. Due to
a mistake, child limit definitions have been able to specify larger limits
for things like bandwidth than the parent specified. This bug has now
been fixed - if a parent limit is more restrictive it will be used in
place of less restrictive limits specified in child limit definitions.


------------------------------------------------------------------------
r459 | boote | 2008-06-05 18:38:11 -0400 (Thu, 05 Jun 2008) | 3 lines

Make successful request log as well as unsuccessful ones.


------------------------------------------------------------------------
r458 | boote | 2008-06-05 17:47:36 -0400 (Thu, 05 Jun 2008) | 3 lines

Fix typo in limits exceeded message.


------------------------------------------------------------------------
r457 | boote | 2008-05-27 18:10:40 -0400 (Tue, 27 May 2008) | 4 lines

Track NTP sync state changes and print out sync/unsync messages when state
changes.


------------------------------------------------------------------------
r456 | boote | 2008-05-27 15:55:46 -0400 (Tue, 27 May 2008) | 3 lines

Fix to make allow_unsync actually work on systems that have ntp syscalls.


------------------------------------------------------------------------
r455 | aaron | 2008-05-27 13:19:15 -0400 (Tue, 27 May 2008) | 3 lines

configure should now accept --disable-nuttcp/--disable-iperf instead of requiring --disable-NUTTCP


------------------------------------------------------------------------
r454 | aaron | 2008-05-23 18:01:01 -0400 (Fri, 23 May 2008) | 4 lines

Disable Nuttcp UDP tests since they're currently not working
Improve the error messages for when iperf or nuttcp aren't found to allay fears that something catastrophic happened.


------------------------------------------------------------------------
r453 | aaron | 2008-05-23 16:48:50 -0400 (Fri, 23 May 2008) | 10 lines

A series of fixes from jeff's tree:

1. Fixed UDP test bug (socket abstraction was copying the socket type in addition to the address so the peer connection was failing)
2. Added comments into the protocol description comments in the code.
3. Corrected the client protocol handling code so that it implicitly recognizes that a pre 1.3 daemon has support for the iperf tool.
4. Added better diagnostic messages for peer connection failures. (Messages now go into the returned sender/receiver results.)
5. Better client error message when two servers don't support the same tools.
6. Bump the version number to 1.3rc2


------------------------------------------------------------------------
r452 | aaron | 2008-05-23 16:34:56 -0400 (Fri, 23 May 2008) | 3 lines

Move the BWCTL_1_3rc1 branch to be the new trunk


------------------------------------------------------------------------
r449 | boote | 2008-04-21 12:23:54 -0400 (Mon, 21 Apr 2008) | 3 lines

log of all changes - prepare for release.


------------------------------------------------------------------------
r448 | boote | 2008-04-21 12:21:27 -0400 (Mon, 21 Apr 2008) | 10 lines

time.c:
    Fix logic error for ntp system call check. Also made it more clear
    from error messages when a host is unsynchronized vs not having ntp
    system calls.

configure.ac:
    Added AC_DEFINE for the TOOL thrulay stuff. (Accidentily removed it
    when setting up the one-source tree build method.)


------------------------------------------------------------------------
r447 | boote | 2008-04-21 11:04:32 -0400 (Mon, 21 Apr 2008) | 4 lines

Check headers needs to happen to define the thrulay header constants
no matter how thrulay is included...


------------------------------------------------------------------------
r446 | boote | 2008-04-21 00:07:15 -0400 (Mon, 21 Apr 2008) | 3 lines

Attempting to force static compile...


------------------------------------------------------------------------
r445 | boote | 2008-04-20 22:36:30 -0400 (Sun, 20 Apr 2008) | 3 lines

adding --automake to libtool exec.


------------------------------------------------------------------------
r444 | boote | 2008-04-20 22:22:20 -0400 (Sun, 20 Apr 2008) | 3 lines

Modify bwctl to use libtool for linking.


------------------------------------------------------------------------
r443 | boote | 2008-04-20 22:01:16 -0400 (Sun, 20 Apr 2008) | 3 lines

Well... it seems to run. (Build within one src tree.)


------------------------------------------------------------------------
r442 | boote | 2008-04-20 21:13:47 -0400 (Sun, 20 Apr 2008) | 4 lines

Start of single-src tree distribution and attempt at simplifying the
autoconf setup. (autoconf sucks)


------------------------------------------------------------------------
r441 | boote | 2008-04-20 10:55:35 -0400 (Sun, 20 Apr 2008) | 4 lines

Adding externals to automatically checkout I2util/thrulay into the
bwctl 1.3rc1.


------------------------------------------------------------------------
r440 | boote | 2008-04-20 10:07:43 -0400 (Sun, 20 Apr 2008) | 5 lines

Preparing for a release - will keep this under branches while messing with
autoconf to try and get a reasonable 'static' compile out of it - then
will cp to tags upon release.


------------------------------------------------------------------------
r439 | aaron | 2008-04-03 09:52:37 -0400 (Thu, 03 Apr 2008) | 8 lines

Commit the beginnings of a test harness for bwctl/bwctld along with a few files
containing basic test cases.

The test harness reads through a list of tests and, optionally, spawns bwctld
instances and then executes the test. It then uses regular expressions defined
for each test to see whether or not the results succeeded or failed.


------------------------------------------------------------------------
r438 | aaron | 2008-04-01 16:14:25 -0400 (Tue, 01 Apr 2008) | 4 lines

Bugfix when no IPv6 address is present, but the headers are
Fix a minor memory leak


------------------------------------------------------------------------
r437 | boote | 2008-03-15 05:20:33 -0400 (Sat, 15 Mar 2008) | 9 lines

Added warning messages to indicate what 'common' tools are available
in the event the client requests a tool that is not available at
both servers.

Cleaned up the error mask in the client a bit - will probably need to
go through the library and be more consistent about what error levels
are used for what types of things.


------------------------------------------------------------------------
r436 | boote | 2008-03-14 21:51:59 -0400 (Fri, 14 Mar 2008) | 24 lines


Abstracted as much of the daemon configuration from bwctld as possible
so it can be used in bwctl, when the client runs the test directly.

So, now the client can completely run tests again since it will invoke
the new tool abstraction in the same way bwctld does.

This required:
    The 'childwait' debugging code to *always* use the context

    Modified the access_prio error level printing to always look
    in the context as well.

    Modified the error printing code to have a masking feature. It
    is now possible to make it ignore all error messages with
    a prio less than the specified level. (Use BWLErrOK to get
    everything.)

Also cleaned up some other error message printing - added a convinience function
for printing a 'tool' name by id.

Now - what remains is documentation and testing.


------------------------------------------------------------------------
r435 | boote | 2008-03-05 18:58:53 -0500 (Wed, 05 Mar 2008) | 22 lines

Adding a client config file (~/.bwctlrc).

This file can be used to set many tool specific aspects of bwctl. Many
of the config file options are identical to the daemon - in fact it
uses most of the same parsing code.

Also modified the 'ports' parsing code to allow the specification of
a single port. (and modified the tool parsing options to use the keyword
'port' instead of 'ports' to make it compatible with previous versions
of bwctl - this was just a mistake on my part when I abstracted the
tools)

Modified the bwctl.man page to indicate the BWCTLRC env variable, and
removed the now defunct environment variables that used to be used to
set these daemon-features.

(Still need to modifiy the client to use the same functions as the daemon
to run the tool - but now that the configuration is available in the
'ctx' variable, this will be easy.)

jeff

------------------------------------------------------------------------
r434 | boote | 2008-02-22 23:49:33 -0500 (Fri, 22 Feb 2008) | 4 lines

Adding information about what 'address' is having an error problem
to an error message.


------------------------------------------------------------------------
r433 | boote | 2008-02-12 11:58:14 -0500 (Tue, 12 Feb 2008) | 39 lines

bwctld.c:

Changing 'fuzz' calculation in scheduling to only multiply the rtt, not the
time error.

Added debugging output for the scheduling process.

Modified the give-up 'timeout' for the end of test to use the dieby timeout 
instead of the generic controltimeout.

bwctld.limits:

Added an example of max_time_error into the file. (A daemon can say that it
will not support peers with greater than this amount of time error - including
the error on the local system.) This is intended to protect bwctld
from a possible DOS attack by clients requesting tests and specifying very
large time errors.

time.c:

Modify the way the time error is specified in the context. Used to be a
(double *), now it is just a double directly. (Required changes to the
context code to support double in the 'union' and context access functions.

endpoint.c:

Modified the poor synchronized clock detection code to make the test
fail. Before it reported the error and continued to try and work - but
it did not work.

bwctl.c:

Modified the scheduling request code to ask for a test a little closer
to current-time.

Added more schedule debugging (with -vv option specified).



------------------------------------------------------------------------
r432 | boote | 2008-01-24 12:00:49 -0500 (Thu, 24 Jan 2008) | 6 lines


Fixed signal handling bug. Client was hanging in 'read' because the
wrong variable was passed into the retn_on_intr arg of the read
function.


------------------------------------------------------------------------
r431 | boote | 2008-01-24 05:31:51 -0500 (Thu, 24 Jan 2008) | 11 lines

Added env variable that can be used to perturbe the clock:
    BWCTL_DEBUG_TIMEOFFSET

Set this to a float-point seconds value to change all timestamps in the server
or client. This is a good way to test time offset issues.

Also, I believe I have fixed the 'sync' uninitialized error - but the code
will need to be rerun in valgrind to be sure.



------------------------------------------------------------------------
r430 | boote | 2008-01-18 06:13:41 -0500 (Fri, 18 Jan 2008) | 26 lines

Removed unneeded options from bwctld:
    datadir/verbose

Removed peerport initialization process. It was overkill, and confusing.
Now, it just uses a random port in the range, and cycles through until
it can open one.

Moved many of the conf-file parsing options into a new function in
daemon.c. This will be called by both the server and the client
for implementing request-manager functionality.

Reset some of the fuzz-time constants to smaller values - now that there
is better process control on iperf, hopefully it will work to tighten
up the schedule.

Added a Memory-register function into the context. This is poor-man's
memory management. When the context is free'd, and registered pointers
are also free'd.

Removed schedule.c. It was never used in bwctl - it was old owamp
code that somehow stayed part of bwctl all this time.

Still don't have the client running tests directly, but things are now
very close.


------------------------------------------------------------------------
r429 | boote | 2008-01-17 17:02:06 -0500 (Thu, 17 Jan 2008) | 6 lines

Remove the 'verbose' option from bwctld. It was not being used.

Remove the testerports fields from the daemon opts structure - this
is handled by the tool abstraction now.


------------------------------------------------------------------------
r428 | boote | 2008-01-17 15:38:48 -0500 (Thu, 17 Jan 2008) | 6 lines

Removing daemon state for bottleneck_capacity. (now it is only in the
'context hash').

Needed to add support for U64 type context variables to do this.


------------------------------------------------------------------------
r427 | boote | 2008-01-15 19:07:47 -0500 (Tue, 15 Jan 2008) | 8 lines

Starting to remove as many options from the 'daemon' state structure
as possible. Moving them into the ContextConfig hash. This will allow
more code reuse between the client-spawned daemon, and the regular
daemon because the client can make use of the same 'conf' file
things. (client will have a .bwctldrc file for setting things
like peerports,tool specific config)


------------------------------------------------------------------------
r426 | aaron | 2008-01-15 10:43:41 -0500 (Tue, 15 Jan 2008) | 10 lines

Improve the bwctl RPM:

1. install basic configuration files(bwctld.conf, bwctld.limits)
2. pull in the limits file from the NPToolkit
3. change the conf file to set the user to 'bwctl'
4. install an init file
5. add a bwctl user on install
6. turn on bwctld on boot during install


------------------------------------------------------------------------
r425 | boote | 2008-01-14 18:02:50 -0500 (Mon, 14 Jan 2008) | 2 lines

corrected.

------------------------------------------------------------------------
r423 | boote | 2008-01-14 17:55:15 -0500 (Mon, 14 Jan 2008) | 3 lines

Update change log.


------------------------------------------------------------------------
r422 | boote | 2008-01-14 17:39:52 -0500 (Mon, 14 Jan 2008) | 3 lines

Prepare for release.


------------------------------------------------------------------------
r421 | aaron | 2008-01-14 17:28:08 -0500 (Mon, 14 Jan 2008) | 3 lines

Compile fix


------------------------------------------------------------------------
r420 | boote | 2008-01-14 14:19:02 -0500 (Mon, 14 Jan 2008) | 24 lines

Modified the Context functions a bit to remove circular dependency issues.

The context holds the error-reporting configuration, and is used
when parsing config files. However, over time more configuration
initialization (with tools and NTP specifically) happened there.

Now that options have been added into the config file to modify how
some of those things are initialized, it was necessary to split the
context creation into two parts - the first does error configuration
and can then be used for parsing the files and setting the other
configurable options.

Modified Aaron's ntp changes a bit - if the system call ever fails,
it will never be called again. It treats the system as if the timex.h
header file was not available.

Also fixed a bug in bwctl where the context was being passed in for
arg one of I2AddrByNode instead of the I2ErrHandle.

Also did a bit of prep to start moving the daemon event loop into the
library to make it easier for the client to run tools in the same
way as the server.


------------------------------------------------------------------------
r419 | aaron | 2008-01-14 11:31:03 -0500 (Mon, 14 Jan 2008) | 6 lines

1. Add a spec file
2. Add some extra verbosity to errors in the capi
3. compile fix
4. install bwlib.h


------------------------------------------------------------------------
r418 | boote | 2008-01-11 21:08:31 -0500 (Fri, 11 Jan 2008) | 9 lines

iperf.c:
    Corrected parallel streams selection. (client needs the flag too)

thrulay.c:
    Added some process managment. thrulay_server forks for every child,
    this waits for all those children to exit before exiting to
    the bwctl data collection process.


------------------------------------------------------------------------
r417 | boote | 2008-01-11 20:13:04 -0500 (Fri, 11 Jan 2008) | 4 lines

Don't reset the 'tool port' if this is the sender. The receiver gets to
decide.


------------------------------------------------------------------------
r416 | boote | 2008-01-11 13:05:02 -0500 (Fri, 11 Jan 2008) | 5 lines

bwctld.limits: add '\' to fix syntax error I accidentily left in during testing.

tools.c/iperf.c: Correct freed-memory read error.


------------------------------------------------------------------------
r415 | boote | 2008-01-11 11:27:29 -0500 (Fri, 11 Jan 2008) | 3 lines

Adding nuttcp.c and thrulay.c tool abstractions.


------------------------------------------------------------------------
r414 | boote | 2008-01-04 18:13:56 -0500 (Fri, 04 Jan 2008) | 4 lines

Modifying the description of the -L flag to hopefully make it more
understandable. (User feedback.)


------------------------------------------------------------------------
r413 | boote | 2008-01-04 17:49:05 -0500 (Fri, 04 Jan 2008) | 5 lines

Added csv output from iperf.

Added 'units' -f flag for iperf.


------------------------------------------------------------------------
r412 | boote | 2008-01-02 14:42:19 -0500 (Wed, 02 Jan 2008) | 3 lines

Mostly testing svn commit-log delivery.


------------------------------------------------------------------------
r411 | boote | 2008-01-02 13:24:22 -0500 (Wed, 02 Jan 2008) | 3 lines

Adding a file with a few useful commands to remember.


------------------------------------------------------------------------
r410 | boote | 2007-12-29 20:33:02 -0500 (Sat, 29 Dec 2007) | 8 lines

Fixed iperf exec'ing. Now iperf completely works through tool abstraction.
(Was using pointers to function (stack) memory. In the previous implementation,
the exec was in the same function scope and stack memory was appropriate,
this broke when the functionality was split across mulitiple functions.)

Thrulay is still failing... That will be next.


------------------------------------------------------------------------
r409 | boote | 2007-12-28 23:38:07 -0500 (Fri, 28 Dec 2007) | 16 lines

bwctld:
    Remove tool selection stuff

bwctl:
    Remove some of the daemon functionality that can no longer
    easily be done by the client. (The next step is to share more
    of the actual bwctld functions directly...)

bwlib:
    Finished tool abstraction all the way through.
    Added Nuttcp to the available tools.

I introduced some kind of error into things when moving it to the abstraction
causing things to fail at the moment - will be fixed soon.


------------------------------------------------------------------------
r408 | boote | 2007-12-24 03:28:06 -0500 (Mon, 24 Dec 2007) | 6 lines

Organization for pre-run and run functions of tool abstraction.

Still need to move functionality from endpoint.c into the tool
abstraction.


------------------------------------------------------------------------
r407 | boote | 2007-12-22 19:39:01 -0500 (Sat, 22 Dec 2007) | 5 lines

Added support so bwctl client can select which tool to run (new tools will
automatically be added into the help messages - and become available
to the -T option).


------------------------------------------------------------------------
r406 | boote | 2007-12-21 14:51:32 -0500 (Fri, 21 Dec 2007) | 4 lines

Make iperf checking function more descriptive. (exec errors are now
reported.)


------------------------------------------------------------------------
r405 | boote | 2007-12-21 02:48:28 -0500 (Fri, 21 Dec 2007) | 3 lines

IperfAvailable() added to iperf tool abstraction.


------------------------------------------------------------------------
r404 | boote | 2007-12-19 02:36:12 -0500 (Wed, 19 Dec 2007) | 5 lines

Abstraction now checks to determine if tools are available and creates
the 'tools' bitmask for use in the hand-shake protocol.



------------------------------------------------------------------------
r403 | boote | 2007-12-16 02:47:28 -0500 (Sun, 16 Dec 2007) | 4 lines

Tests now work again. (The peer connection was resetting the 'selected'
tool in the run_tester because of variable reuse...)


------------------------------------------------------------------------
r402 | boote | 2007-12-13 15:30:19 -0500 (Thu, 13 Dec 2007) | 19 lines

Working on completely changing how fedemp did tool negotiation...

(He had it doing things in the client - which makes no sense, since the client
is not even involved in the test in 3-party.)

This required putting more things in the protocol communication.

This does not work yet, but it is getting much closer. Basically - I still
need to decide where to put the 'tool' detection portion. I'm thinking at
daemon start-up only. But, then if someone installs a new tool (like iperf)
then the daemon would need to be restarted to make it available.

(Since the tool detection is not currently running - all tests currently
fail since the tool variable is not initialized. But, I have enough
changes here that are working - I wanted to checkpoint this work.)

jeff


------------------------------------------------------------------------
r401 | boote | 2007-12-07 20:27:12 -0500 (Fri, 07 Dec 2007) | 7 lines

Create a unified API for selecting tool portranges.

Document the new -P option (nParellel streams).

Started moving where tool detection is done.


------------------------------------------------------------------------
r400 | boote | 2007-12-01 15:41:47 -0500 (Sat, 01 Dec 2007) | 7 lines

Corrected bug in PeerAgent.

Sender would finish before receiver, and would
not wait for StopSessions message correctly. Needed to reset the 'rc'
variable to call select again to get updated state of peer socket.


------------------------------------------------------------------------
r399 | boote | 2007-12-01 02:52:00 -0500 (Sat, 01 Dec 2007) | 3 lines

Modify default limits file to mention the max_time_error option.


------------------------------------------------------------------------
r398 | boote | 2007-12-01 02:51:06 -0500 (Sat, 01 Dec 2007) | 8 lines

Corrected the parsing error (for forgotten comma's). The hasty fix
at SC did not work.

Added a max_time_error limit type. This allows the daemon to decide
if a given 'clock' is precise enough to test with, and puts control
of this parameter in the server configuration.


------------------------------------------------------------------------
r397 | boote | 2007-09-21 01:52:56 -0400 (Fri, 21 Sep 2007) | 5 lines

Reorganized autoconf stuff slightly, because conditional compiling of
individual tool drivers was not working as expected. (automake/libtool
stuff I had wrong.)


------------------------------------------------------------------------
r396 | boote | 2007-09-20 02:56:28 -0400 (Thu, 20 Sep 2007) | 11 lines

Modularized config file parsing, so individual 'tool' drivers can add
their own config file options.

Added autoconf magic for enabling/disabling specific tools.

bwctld - cleaned up conf file parsing beyond modularization. Now uses
I2ErrLog for error reporting during conf file parsing.

bwctld/bwctl - simplified port-range specifications slightly.


------------------------------------------------------------------------
r395 | boote | 2007-09-04 02:00:12 -0400 (Tue, 04 Sep 2007) | 13 lines

beginnings of tool abstraction. Still need to move iperf/nuttcp code into
abstraction. autoconf stuff is done and works.

reworked bwctld config file stuff to parse config file in two phases so
the 'context' can be initialized before real parsing is done. (first phase
deals with error logging. Second phase will do everything else including
tool specific parsing which needed to wait until after the 'context' is
created. The context will hold a table of all configured throughput tools
including functions/data to run them.

(does not currently compile completely)


------------------------------------------------------------------------
r394 | boote | 2007-08-29 17:50:16 -0400 (Wed, 29 Aug 2007) | 6 lines

Modifications based on further testing for child process management.

bwctl is now much better about detecting problems in child processes
and reporting them.


------------------------------------------------------------------------
r393 | boote | 2007-08-29 17:48:56 -0400 (Wed, 29 Aug 2007) | 5 lines

Adding configure test to look for 'trunc' in -lm.

jeff


------------------------------------------------------------------------
r392 | boote | 2007-08-29 17:47:02 -0400 (Wed, 29 Aug 2007) | 3 lines

Corrected -h output for -a option (unsync clock offset).


------------------------------------------------------------------------
r391 | boote | 2007-08-28 19:20:12 -0400 (Tue, 28 Aug 2007) | 4 lines

Modified the static GetAcceptValue() function to be a private library
function. (Useful in endpoint.c as well as protocol.c)


------------------------------------------------------------------------
r390 | boote | 2007-08-28 19:17:31 -0400 (Tue, 28 Aug 2007) | 3 lines

Cleanup sub-process management for tester children. Now, perhaps I will be
able to detect when iperf freaks out. (Still needs major testing...)

------------------------------------------------------------------------
r389 | boote | 2007-08-26 16:55:40 -0400 (Sun, 26 Aug 2007) | 5 lines

Starting to add better error checking and process management into sub-children.

(this part doesn't compile yet, but I'm going off-grid and need to checkpoint)


------------------------------------------------------------------------
r388 | boote | 2007-07-03 18:36:35 -0400 (Tue, 03 Jul 2007) | 18 lines

Removed all time functions that do not go through the BWLGetTimestamp
functions. (This allows offset debugging to work...)

Corrected all type-punning except with regard to the socket API. (And
still corrected some of them - the easy ones.)
So... I'm not compliant to the ISO standard, but I am to the POSIX
standard... Hmm... Who wins?)

Added some overflow protection to 64-bit arithm functions.

Documented the BWCL_DEBUG_TIMEOFFSET environment variable. (This can
be used to fake bwctl into reading the clock as a fixed offset from
where it really is. This is very useful when debugging issues with
offset clocks.)

jeff


------------------------------------------------------------------------
r387 | boote | 2007-06-22 22:26:51 -0400 (Fri, 22 Jun 2007) | 4 lines

Updating autoconf configuration for thrulay integration and now
using libtool.


------------------------------------------------------------------------
r386 | boote | 2007-06-07 09:15:47 -0400 (Thu, 07 Jun 2007) | 4 lines

Correcting compiler warnings for signed/unsigned mismatches, unused vars,
and function signature mismatches.


------------------------------------------------------------------------
r385 | boote | 2007-05-17 21:45:29 -0400 (Thu, 17 May 2007) | 6 lines

Improved error detection.

Fixed code to make locally spawned server work again. Broke in merge
with fedemp code (interrupts), and changes to I2util (I2Addr issues
for unix-domain sockets).

------------------------------------------------------------------------
r384 | boote | 2007-05-17 02:32:38 -0400 (Thu, 17 May 2007) | 15 lines

policy.h:
Modified some Context key names to indicate the 'type' of the Context
variable.

capi.c:
local_addr part of cntrl record was only set if bind is used - now it is
updated in all cases.

context.c:
Ensure that Context 'set' functions use typed key names.

*:
reformatted text.


------------------------------------------------------------------------
r383 | boote | 2007-05-15 17:47:25 -0400 (Tue, 15 May 2007) | 2 lines

Made sure all I/O now pays attention to interrupt's.

------------------------------------------------------------------------
r382 | boote | 2007-05-11 16:09:20 -0400 (Fri, 11 May 2007) | 3 lines

Adding -V version flag.


------------------------------------------------------------------------
r381 | boote | 2007-04-27 19:44:30 -0400 (Fri, 27 Apr 2007) | 8 lines

capi.c:
    Allowing loopback test - but giving warning. (So I can test with a
    single system.)

configure.ac:
    Cleanup here - suffering from years of bit-rot.


------------------------------------------------------------------------
r380 | boote | 2007-04-02 00:05:22 -0400 (Mon, 02 Apr 2007) | 7 lines

Adding support for BWCTL_DEBUG_TIMEOFFSET environment var. Now, it is easier
to make a daemon behave as if the clock is offset - and I can better test
for time-offset problems.

jeff


------------------------------------------------------------------------
r379 | boote | 2007-04-02 00:00:48 -0400 (Mon, 02 Apr 2007) | 6 lines

Changed how I2Util and thrulay are found by autoconf. This is much cleaner,
and uses new versions of the AC macros - so hopefully it will last a while.

jeff


------------------------------------------------------------------------
r378 | boote | 2007-03-30 19:48:53 -0400 (Fri, 30 Mar 2007) | 3 lines

Modified bwctl to use I2util as a stand-alone package.


------------------------------------------------------------------------
r377 | boote | 2007-03-23 01:58:06 -0400 (Fri, 23 Mar 2007) | 11 lines

Corrected hash-table 'config' variables for both context records and
control records to by type-safe. (Latest ISO C rules don't allow
for type-punning.)

(Basically added some var-args functions for 'sets' to let them stay
type independent, added a union to hold the hash value, and made
all the 'keys' encode the type as part of the name so the union
can be set/get using the correct type.)

jeff

------------------------------------------------------------------------
r376 | boote | 2007-03-20 17:16:35 -0400 (Tue, 20 Mar 2007) | 5 lines

formatting change. Moved all source to 4-char indents. (it was 50/50 -
consistancy makes it much easier to read.)

jeff

------------------------------------------------------------------------
r375 | boote | 2007-03-16 22:05:55 -0400 (Fri, 16 Mar 2007) | 18 lines

Migrated the reset of bwctl to I2Addr's.

The code from GSoC06 is not as clean as I would like. It is going to
take some work to fix. The main reason for going to an api interface
for the tester is to do most of the testers work during test-request
negotiation. That way, things that fail can fail before they effect
the scheduling on the client side. That was not done - so there is
a fair amount of work. This was not done for the GSoC project - most
of the pieces are here - but they need to be refactored to make this
a stable/supportable piece of code.

Also, there as been a lot of bit-rot in the past 2 years since the last
release. The same type-punning issues that took me a couple of days on
owamp need to be fixed here.

Additionally, there are some problems with the way interrupt-handlers
are done.

------------------------------------------------------------------------
r374 | boote | 2007-03-16 03:11:13 -0400 (Fri, 16 Mar 2007) | 4 lines

Most of bwctl changed to use I2Addr from I2util library instead of
internal socket abstraction. (More work to do - that is why this is
in a branch. Just checkpointing...)

------------------------------------------------------------------------
r373 | (no author) | 2007-03-13 17:30:01 -0400 (Tue, 13 Mar 2007) | 1 line

This commit was manufactured by cvs2svn to create branch 'BWL06CLEANUP'.
------------------------------------------------------------------------
r372 | boote | 2007-03-13 17:30:01 -0400 (Tue, 13 Mar 2007) | 6 lines

Merge in most of the *any tester* functionality.

Much integration work still to do, but this compiles - at least on Mac OS.

jeff

------------------------------------------------------------------------
r371 | boote | 2007-01-13 16:42:48 -0500 (Sat, 13 Jan 2007) | 4 lines

Merging changes from SC06 into 'head'.

jeff

------------------------------------------------------------------------
r326 | boote | 2006-04-19 21:24:46 -0400 (Wed, 19 Apr 2006) | 2 lines

Additional todo...

------------------------------------------------------------------------
r325 | boote | 2006-04-19 20:30:19 -0400 (Wed, 19 Apr 2006) | 4 lines

Now after running ispell...

jeff

------------------------------------------------------------------------
r324 | boote | 2006-04-19 20:26:52 -0400 (Wed, 19 Apr 2006) | 5 lines

Adding more description of the scheduling algorithm to the architecture
page.

jeff

------------------------------------------------------------------------
r323 | boote | 2006-04-19 19:19:43 -0400 (Wed, 19 Apr 2006) | 4 lines

Adding TODO file.

jeff

------------------------------------------------------------------------
r322 | boote | 2006-03-23 00:48:35 -0500 (Thu, 23 Mar 2006) | 4 lines

Change program registration for default syslog.

jeff

------------------------------------------------------------------------
r321 | boote | 2006-03-09 20:53:20 -0500 (Thu, 09 Mar 2006) | 2 lines

format change...

------------------------------------------------------------------------
r320 | boote | 2006-01-25 15:33:45 -0500 (Wed, 25 Jan 2006) | 9 lines

bwlib.h:
    corrected comment.

capi.c:
    removed redundant 'if' - recv_port MUST be passed in. It is better
    to core dump than to hide the fact that it was not.

jeff

------------------------------------------------------------------------
r319 | boote | 2006-01-25 13:39:13 -0500 (Wed, 25 Jan 2006) | 7 lines

Adding headings to paragraphs in bwctl architecture discussion to help
outline what information is where and make it more readable.

(Feedback from DFN.)

jeff

------------------------------------------------------------------------
r318 | boote | 2005-11-14 18:50:13 -0500 (Mon, 14 Nov 2005) | 3 lines

Adding the '-a' flag into the getopts string. The option was added and
documented, but did not actually work due to the slacker developer.

------------------------------------------------------------------------
r317 | boote | 2005-09-30 19:33:02 -0400 (Fri, 30 Sep 2005) | 4 lines

Corrected comments...

jeff

------------------------------------------------------------------------
r316 | boote | 2005-09-30 19:30:10 -0400 (Fri, 30 Sep 2005) | 2 lines

Fixing autoconf macro mess in bwctl too...

------------------------------------------------------------------------
r313 | boote | 2005-09-08 17:33:51 -0400 (Thu, 08 Sep 2005) | 4 lines

Last round of rcs changes added into file.

jeff

------------------------------------------------------------------------
r312 | boote | 2005-09-07 19:44:14 -0400 (Wed, 07 Sep 2005) | 4 lines

Adding new options into example config file.

jeff

------------------------------------------------------------------------
r311 | boote | 2005-09-07 19:36:18 -0400 (Wed, 07 Sep 2005) | 4 lines

Modified documentation for new options in this release.

jeff

------------------------------------------------------------------------
r310 | boote | 2005-09-07 19:00:13 -0400 (Wed, 07 Sep 2005) | 7 lines

Changing the names of the config options to be consistent. They now all
have '_' between words. (Before, some did and some did not.)

The old versions will still be recognized for now.

jeff

------------------------------------------------------------------------
r309 | boote | 2005-09-07 18:59:14 -0400 (Wed, 07 Sep 2005) | 3 lines

Adding description of file and few more additional things that have been
added.

------------------------------------------------------------------------
r308 | boote | 2005-09-01 19:47:12 -0400 (Thu, 01 Sep 2005) | 17 lines


Preparing for new release. Unfortunately, I will not be able to test
until next week.

CHANGES
    enumerate changes from last release

Modified the BWLCreateContext function to be a varargs function so
Context values can be set upon creation. This is how a new variable
can be added to modify how the use of NTP is initialized.

corrected compiler warnings...

Began to document NTP changes - this is not done yet.

jeff

------------------------------------------------------------------------
r307 | boote | 2005-08-29 12:20:10 -0400 (Mon, 29 Aug 2005) | 4 lines

Modifying version tag.

jeff

------------------------------------------------------------------------
r306 | boote | 2005-08-29 12:00:50 -0400 (Mon, 29 Aug 2005) | 4 lines

Adding an rcs2log changelog.

jeff

------------------------------------------------------------------------
r305 | boote | 2005-08-28 18:15:09 -0400 (Sun, 28 Aug 2005) | 6 lines

Modifying the "iperf killed" code to do a non-blocking waitpid just
before the message - just to double check that the process is still
going.

jeff

------------------------------------------------------------------------
r304 | boote | 2005-08-28 17:28:03 -0400 (Sun, 28 Aug 2005) | 5 lines

Need to include timex.h *after* bwlib.h since the autoconf macro's
are not defined until then.

jeff

------------------------------------------------------------------------
r303 | boote | 2005-08-28 17:12:23 -0400 (Sun, 28 Aug 2005) | 10 lines

2 changes:

1) Added message into data stream to indicate iperf was killed for
scheduling purposes.

2) Modified code to still work if ntp system calls are not available
or if system clock is not synchronized.

jeff

------------------------------------------------------------------------
r302 | boote | 2005-08-28 17:09:38 -0400 (Sun, 28 Aug 2005) | 6 lines

Adding header check for timex.h. This file is required for the ntp system
calls. The code has been modified to not use the system calls if this
header file is not found.

jeff

------------------------------------------------------------------------
r301 | boote | 2005-07-18 22:06:55 -0400 (Mon, 18 Jul 2005) | 6 lines

Fixed a bug in the "spawned" local server case. Need to wait for the child
daemon to exit on it's own, or the protocol message you read from it for
the "close" will not be valid...

jeff

------------------------------------------------------------------------
r300 | boote | 2005-07-18 16:16:30 -0400 (Mon, 18 Jul 2005) | 5 lines

Preparing for "alpha" release - fixed config files to be more appropriate
for an "example".

jeff

------------------------------------------------------------------------
r299 | boote | 2005-07-18 14:34:55 -0400 (Mon, 18 Jul 2005) | 4 lines

Adding newlines to output to make it a little more readable.

jeff

------------------------------------------------------------------------
r298 | boote | 2005-07-17 03:05:19 -0400 (Sun, 17 Jul 2005) | 4 lines

Changing the default -L value to be no less than 5 minutes.

jeff

------------------------------------------------------------------------
r297 | boote | 2005-07-17 02:56:21 -0400 (Sun, 17 Jul 2005) | 4 lines

initializing full ntp_conf structure.

jeff

------------------------------------------------------------------------
r296 | boote | 2005-07-16 18:09:56 -0400 (Sat, 16 Jul 2005) | 4 lines

Initialize the whole ntp_conf structure...

jeff

------------------------------------------------------------------------
r295 | boote | 2005-07-16 17:29:40 -0400 (Sat, 16 Jul 2005) | 5 lines

Adding code to print error messages to stderr in the I2Util error module
to handle LOG_PERROR directly if syslog does not provide the functionality.

jeff

------------------------------------------------------------------------
r294 | boote | 2005-07-15 11:51:26 -0400 (Fri, 15 Jul 2005) | 36 lines

Porting to Solaris... This compiles, I have yet to do any real testing.
Once this is checked in, I will make sure these changes don't break
Linux/FreeBSD.

configure.ac:
    Adding socket,nsl,rt libraries
    Adding check for paths.h header file

ErrLogSyslog.c:
    Define LOG_AUTHPRIV and LOG_FTP if they are not defined.

Options.c:
conf.c:
    Adding cast from char to int for all isspace/isdigit args.

readpassphrase.c:
    remove cdefs.h.
    Add check for autoconf paths.h value, include or define _PATH_TTY.
    Adding cast from char to int for all isspace/isdigit args.

bwctl.c:
    Adding cast from char to int for all isspace/isdigit args.
    Change setenv to putenv to set POSIXLY_CORRECT for getopt.
    Check for LOG_PERROR. (Add warning if -r is passed in, and
        LOG_PERROR is not available.)

bwctld.c:
    Add check for LOG_PERROR.

policy.c:
    Remove fts.h - not even used here, this is an owamp leftover...
    Adding cast from char to int for all isspace/isdigit args.

util.c:
    Adding cast from char to int for all isspace/isdigit args.

------------------------------------------------------------------------
r293 | boote | 2005-07-14 18:54:59 -0400 (Thu, 14 Jul 2005) | 6 lines

changing all u_int* types to uint* types so they agree with the latest
'C' standard. This is part of a Solaris port - I am about to make sure this
still works on Linux/FreeBSD...

jeff

------------------------------------------------------------------------
r292 | boote | 2005-07-14 18:22:15 -0400 (Thu, 14 Jul 2005) | 4 lines

Adding some debugging code.

jeff

------------------------------------------------------------------------
r291 | boote | 2005-07-14 14:29:06 -0400 (Thu, 14 Jul 2005) | 2 lines

syntax error. Sigh.

------------------------------------------------------------------------
r290 | boote | 2005-07-14 14:19:52 -0400 (Thu, 14 Jul 2005) | 13 lines

capi.c:

    Added a check for localhost/loopback - those addresses are not valid
    test endpoints. (They are not routable off the host, and trying to
    use them confuses the "peer" connection.)

    Removing default address of localhost from BWLControlOpen if server
    address is not specified. (This would have failed had it happened
    anyway.)

sapi.c:
    Modified a comment.

------------------------------------------------------------------------
r289 | boote | 2005-07-11 21:05:38 -0400 (Mon, 11 Jul 2005) | 5 lines

Fix for srcnode bug. (Passive bit was not being set in "hints" for
some configurations.)

jeff

------------------------------------------------------------------------
r288 | boote | 2005-07-11 20:12:15 -0400 (Mon, 11 Jul 2005) | 8 lines

Fix annoying bug that caused incorrect error to be returned. (Caused by
an uninitialized variable. I was jumping into the middle of a block,
and the static initializer was never being executed.)

(Yes, this is the one everyone always complains about.)

jeff

------------------------------------------------------------------------
r287 | boote | 2005-07-11 19:30:54 -0400 (Mon, 11 Jul 2005) | 4 lines

Increasing version number - to prepare for bug-fix release.

jeff

------------------------------------------------------------------------
r286 | boote | 2005-07-11 19:30:17 -0400 (Mon, 11 Jul 2005) | 4 lines

Changing version string to print at bottom of usage() message.

jeff

------------------------------------------------------------------------
r285 | boote | 2005-07-11 19:29:10 -0400 (Mon, 11 Jul 2005) | 4 lines

Changing version string to print at bottom of usage message.

jeff

------------------------------------------------------------------------
r284 | boote | 2005-07-11 19:18:24 -0400 (Mon, 11 Jul 2005) | 4 lines

Adding an ack's section.

jeff

------------------------------------------------------------------------
r283 | boote | 2005-07-11 19:18:08 -0400 (Mon, 11 Jul 2005) | 4 lines

Just changed code formatting for readability.

jeff

------------------------------------------------------------------------
r282 | boote | 2005-07-11 19:17:47 -0400 (Mon, 11 Jul 2005) | 6 lines

Adding more contextual information to passphrase prompt. You are now told
which host you are attempting to authenticate for in addition to the
identity name. (If it is for the -A flag, the host is listed as BOTH.)

jeff

------------------------------------------------------------------------
r281 | boote | 2005-07-11 18:24:20 -0400 (Mon, 11 Jul 2005) | 4 lines

Adding version reporting to usage() messages.

jeff

------------------------------------------------------------------------
r280 | boote | 2005-05-20 12:22:23 -0400 (Fri, 20 May 2005) | 4 lines

Corrected logic flow. -f is now REQUIRED if the uid comes back as 0.

jeff

------------------------------------------------------------------------
r279 | boote | 2005-05-20 12:00:14 -0400 (Fri, 20 May 2005) | 2 lines

typo.

------------------------------------------------------------------------
r278 | boote | 2005-05-20 11:54:09 -0400 (Fri, 20 May 2005) | 7 lines

Adding an option to allow bwctld to run with root permissions.
(Needed for specifying some combinations of TOS bits.)

(One bug done.)

jeff

------------------------------------------------------------------------
r277 | boote | 2004-09-16 11:45:12 -0400 (Thu, 16 Sep 2004) | 4 lines

Correct error message.

jeff

------------------------------------------------------------------------
r275 | boote | 2004-09-15 20:11:01 -0400 (Wed, 15 Sep 2004) | 6 lines

Ugh - now fix the code to work on FreeBSD again too.

computers--

jeff

------------------------------------------------------------------------
r274 | boote | 2004-09-15 20:06:09 -0400 (Wed, 15 Sep 2004) | 4 lines

correct brain-dead linux getopt.

jeff

------------------------------------------------------------------------
r272 | boote | 2004-09-14 19:06:58 -0400 (Tue, 14 Sep 2004) | 4 lines

Modified to prepare for 1.1a release.

jeff

------------------------------------------------------------------------
r271 | boote | 2004-09-14 18:55:52 -0400 (Tue, 14 Sep 2004) | 2 lines

spell checked...

------------------------------------------------------------------------
r270 | boote | 2004-09-14 18:37:27 -0400 (Tue, 14 Sep 2004) | 4 lines

Document new features.

jeff

------------------------------------------------------------------------
r269 | boote | 2004-09-10 18:52:59 -0400 (Fri, 10 Sep 2004) | 4 lines

document conf file a little better.

jeff

------------------------------------------------------------------------
r268 | boote | 2004-09-10 18:48:22 -0400 (Fri, 10 Sep 2004) | 12 lines

Merging SERVLESS_CLIENT changes into HEAD.

bwctl
	New athentication options
	TOS
	(Still need to document 3-party,servless client, env vars.)

bwctld
	new conf options

jeff

------------------------------------------------------------------------
r267 | boote | 2004-09-10 18:46:45 -0400 (Fri, 10 Sep 2004) | 9 lines

Merging SERVLESS_CLIENT changes into HEAD.

Added example and description of:
peerports
priority
accesspriority

jeff

------------------------------------------------------------------------
r266 | boote | 2004-09-10 18:45:45 -0400 (Fri, 10 Sep 2004) | 38 lines

Merging SERVLESS_CLIENT changes into HEAD.

api.c:
	Lots of changes to the Addr abstraction to support more
	socktypes and address families. Unified Addr abstraction
	a LOT. Eventually, this should probably move down into I2util.

bwlib.h:
bwlibP.h:
	Added support for PeerPortRange.
	Added support to log access and errors to different prio's.

capi.c:
	Modified to use new Addr api.

context.c:
	Access log prio - access function for context.

endpoint.c:
	Modified iperf_exec to use execv in support of a user spawned daemon.
	Modified to use new Addr api.
	Added TOS support.

protocol.c:
	Modified to use new Addr api.
	Added TOS support.

sapi.c:
	Modified to use new Addr api.

util.c:
	Removed Hex funcs.
	Added a parse ports function to do port range logic for
		both bwctl and bwctld.


jeff

------------------------------------------------------------------------
r265 | boote | 2004-09-10 18:36:20 -0400 (Fri, 10 Sep 2004) | 23 lines

Merging SERVLESS_CLIENT changes into HEAD.

bwctld.c:
	Added option to configure a port range for peer connections.
	Modified scheduling algorithm to enable 3-party to work.

	Modified srcnode option to allow only setting the port to wildcard
	the address on a different port for listening.

	Added TOS support to protocol.

	Modified iperf exec to bind the source address for the sender.

	Modified the ordering of initialization to change when the setuid
	will happen. (This will be more important later when bwctld notices
	changes in the config/limits files.)

	Modied daemon to send "access" messages with a different priority
	than "error" messages to allow admins to seperate these in
	syslog.

jeff

------------------------------------------------------------------------
r264 | boote | 2004-09-10 18:28:48 -0400 (Fri, 10 Sep 2004) | 25 lines

Merging SERVLESS_CLIENT changes into HEAD.

bwctl.c:
	3-party implemented:
		bwctl can now talk to do remote servers to arrange
		a test between them.
	servless client implemented:
		If only one target host is specified, then the localhost
		is assumed to be the other target. If bwctl can't contact
		a local daemon, it will spawn off a process to run iperf
		itself - dealing with all peer communication with the
		other bwctld process.
	Completely modified the scheduling algorithm so it would work
		with 3-party as well as point-2-point. (timing issues
		were different, and I had to rethink.)
	Lots of small things...
	Enabled the -S (TOS) option to iperf.
	Modified the way error logging happens.
	Added a number of environment variables to control how a
		spawned off daemon controls iperf. (port numbers etc...)
	Generalized the authentication options to make future auth
		protocols easier to incorporate.

jeff

------------------------------------------------------------------------
r228 | boote | 2004-08-07 02:53:23 -0400 (Sat, 07 Aug 2004) | 9 lines

Modified BWLControlOpen function to take a new masked bit to indicate
that it should use the "least restrictive" mode instead of the *most*
restrictive mode. (It was too much of a pain to implement this above
this level, and adding a bit to a bitmask is a pretty easy fix.) This
actually made me rethink some of what I was doing in capi.c and I have
even simplified the code some.

jeff

------------------------------------------------------------------------
r227 | boote | 2004-08-06 19:24:47 -0400 (Fri, 06 Aug 2004) | 4 lines

Fix bit-shift.

jeff

------------------------------------------------------------------------
r226 | boote | 2004-08-06 19:05:26 -0400 (Fri, 06 Aug 2004) | 4 lines

passing in wrong 'mode' variable. Ugh.

jeff

------------------------------------------------------------------------
r225 | boote | 2004-08-06 19:01:40 -0400 (Fri, 06 Aug 2004) | 2 lines

syntax.

------------------------------------------------------------------------
r224 | boote | 2004-08-06 19:00:27 -0400 (Fri, 06 Aug 2004) | 5 lines

Modify peer connection to use the least restrictive authmode required
as defined by the most restrictive of the two control connections.

jeff

------------------------------------------------------------------------
r223 | boote | 2004-08-04 23:41:53 -0400 (Wed, 04 Aug 2004) | 2 lines

Disable excess debug messages.

------------------------------------------------------------------------
r222 | boote | 2004-08-04 23:39:37 -0400 (Wed, 04 Aug 2004) | 4 lines

Disable excess debug messages.

jeff

------------------------------------------------------------------------
r221 | boote | 2004-08-04 19:22:32 -0400 (Wed, 04 Aug 2004) | 4 lines

Another attempt at a timing algorithm.

jeff

------------------------------------------------------------------------
r220 | boote | 2004-08-04 18:37:50 -0400 (Wed, 04 Aug 2004) | 2 lines

more still...

------------------------------------------------------------------------
r219 | boote | 2004-08-04 18:34:04 -0400 (Wed, 04 Aug 2004) | 2 lines

More debugging...

------------------------------------------------------------------------
r218 | boote | 2004-08-04 18:27:21 -0400 (Wed, 04 Aug 2004) | 2 lines

More timing problems... Adding debugging code to daemon.

------------------------------------------------------------------------
r217 | boote | 2004-07-30 17:07:21 -0400 (Fri, 30 Jul 2004) | 5 lines

Modified how the server determines how much lead time is required before
a test can start and wrote a long comment explaining the algorithm.

jeff

------------------------------------------------------------------------
r216 | boote | 2004-07-30 16:37:09 -0400 (Fri, 30 Jul 2004) | 6 lines

Oops - reservation code was not using 'fuzz' to determine when a
reservation could happen. Only rtt. Both are needed to determine how
far into the future things must be scheduled.

jeff

------------------------------------------------------------------------
r215 | boote | 2004-07-30 16:35:32 -0400 (Fri, 30 Jul 2004) | 7 lines

capi.c: removed error message. caller of BWLControlOpen should report
	connect errors.

time.c: fix typo from last check-in.

jeff

------------------------------------------------------------------------
r214 | boote | 2004-07-30 16:34:04 -0400 (Fri, 30 Jul 2004) | 5 lines

Modifying "fuzz" time to include rtt time to other server as well as NTP
offset. (3-party adds some delay to when a test can be started...)

jeff

------------------------------------------------------------------------
r213 | boote | 2004-07-30 16:22:53 -0400 (Fri, 30 Jul 2004) | 4 lines

Added a set timestamp error utility function.

jeff

------------------------------------------------------------------------
r212 | boote | 2004-07-30 15:21:23 -0400 (Fri, 30 Jul 2004) | 4 lines

Simplifying error messages.

jeff

------------------------------------------------------------------------
r211 | boote | 2004-07-29 20:02:43 -0400 (Thu, 29 Jul 2004) | 8 lines

Added better error messages. The errors now indicate which server the client
was attempting to talk to.

3 party works now - although I still need to test authentication with 3 party.
:)

jeff

------------------------------------------------------------------------
r210 | boote | 2004-07-29 19:20:06 -0400 (Thu, 29 Jul 2004) | 5 lines

Corrected logic to determine if a server is "busy" or if the request
is simply "denied".

jeff

------------------------------------------------------------------------
r209 | boote | 2004-07-29 17:49:05 -0400 (Thu, 29 Jul 2004) | 6 lines

Corrected copy of session record to only tspec portion.

Corrected logic for "send" determination.

jeff

------------------------------------------------------------------------
r208 | boote | 2004-07-29 17:08:08 -0400 (Thu, 29 Jul 2004) | 4 lines

removed unused var.

jeff

------------------------------------------------------------------------
r207 | boote | 2004-07-29 16:51:20 -0400 (Thu, 29 Jul 2004) | 4 lines

Fix compile errors.

jeff

------------------------------------------------------------------------
r206 | boote | 2004-07-29 14:40:57 -0400 (Thu, 29 Jul 2004) | 12 lines

bwctl:
	Added remaining logic to support authentication to more than
	a single auth method.

time.c:
	Added include of sys/time.h.

Still needs to be compiled and tested, but logic is now completely there
for 3 party.

jeff

------------------------------------------------------------------------
r205 | boote | 2004-07-27 18:43:26 -0400 (Tue, 27 Jul 2004) | 8 lines

capi.c:
	Modifies errno to indicate if a connection was disallowed by
	policy or simply failed.
bwctld.man:
	Modified to deal with 3-party case - different authentication.

jeff

------------------------------------------------------------------------
r204 | boote | 2004-07-27 18:42:10 -0400 (Tue, 27 Jul 2004) | 6 lines

At least "part" of 3-party is here. server-less client is not done at all.

(This has not even been compiled, but I have enough new code here that I want it backed up to cvs...)

jeff

------------------------------------------------------------------------
r203 | boote | 2004-07-09 12:17:16 -0400 (Fri, 09 Jul 2004) | 4 lines

cleaned up compiler warnings.

jeff

------------------------------------------------------------------------
r202 | boote | 2004-07-08 17:27:21 -0400 (Thu, 08 Jul 2004) | 4 lines

Removed italics for "BWCTL" and added recommended hardware section.

jeff

------------------------------------------------------------------------
r201 | boote | 2004-07-08 17:08:09 -0400 (Thu, 08 Jul 2004) | 4 lines

Reformatting.

jeff

------------------------------------------------------------------------
r200 | boote | 2004-05-28 18:13:30 -0400 (Fri, 28 May 2004) | 4 lines

Corrected some comments...

jeff

------------------------------------------------------------------------
r199 | boote | 2004-05-27 07:59:56 -0400 (Thu, 27 May 2004) | 5 lines

checking in possible fix for reservation - cancellation bug.
(still needs to be tested.)

jeff

------------------------------------------------------------------------
r198 | boote | 2004-05-20 16:45:14 -0400 (Thu, 20 May 2004) | 4 lines

Cleanup.

jeff

------------------------------------------------------------------------
r197 | boote | 2004-03-24 16:02:20 -0500 (Wed, 24 Mar 2004) | 4 lines

Adding performance tuning links to documentation.

jeff

------------------------------------------------------------------------
r195 | boote | 2004-03-10 09:12:20 -0500 (Wed, 10 Mar 2004) | 4 lines

this is version 1.0e

jeff

------------------------------------------------------------------------
r194 | boote | 2004-03-10 09:10:49 -0500 (Wed, 10 Mar 2004) | 7 lines

Indicate "changes" for this version.

remove -q option from bwctld - (I added this here when I thought I was
adding it to bwctl.)

jeff

------------------------------------------------------------------------
r193 | boote | 2004-03-10 08:55:37 -0500 (Wed, 10 Mar 2004) | 4 lines

Corrected documentation of "assign user" lines.

jeff

------------------------------------------------------------------------
r192 | boote | 2004-03-10 08:44:03 -0500 (Wed, 10 Mar 2004) | 4 lines

Creating version 1.0e

jeff

------------------------------------------------------------------------
r191 | boote | 2004-03-10 08:34:21 -0500 (Wed, 10 Mar 2004) | 4 lines

Corrected order for -v/-q options so logic works correctly. Sigh.

jeff

------------------------------------------------------------------------
r190 | boote | 2004-03-10 07:53:29 -0500 (Wed, 10 Mar 2004) | 10 lines

Add syncfuzz to server, remove sync check from client.

Add -q option to bwctl properly.

document syncfuzz

Add documentation on :port for -c/-s options of bwctl

jeff

------------------------------------------------------------------------
r189 | boote | 2004-03-09 20:11:38 -0500 (Tue, 09 Mar 2004) | 4 lines

Fixed variable field length for memcpy.

jeff

------------------------------------------------------------------------
r188 | boote | 2004-03-09 19:30:30 -0500 (Tue, 09 Mar 2004) | 4 lines

Correct syntax errors.

jeff

------------------------------------------------------------------------
r187 | boote | 2004-03-09 19:27:28 -0500 (Tue, 09 Mar 2004) | 4 lines

Fix for policy bug.

jeff

------------------------------------------------------------------------
r186 | boote | 2004-03-04 14:58:28 -0500 (Thu, 04 Mar 2004) | 4 lines

Paul and Susan edits.

jeff

------------------------------------------------------------------------
r185 | boote | 2004-03-04 13:46:12 -0500 (Thu, 04 Mar 2004) | 4 lines

Susan/Paul Hyder edits.

jeff

------------------------------------------------------------------------
r184 | boote | 2004-03-04 13:34:26 -0500 (Thu, 04 Mar 2004) | 4 lines

Susan edits.

jeff

------------------------------------------------------------------------
r183 | boote | 2004-03-03 02:22:25 -0500 (Wed, 03 Mar 2004) | 6 lines

changed esterr to maxerr for timestamp errors.

Removed old version of timestamps that doesn't use "offsets".

jeff

------------------------------------------------------------------------
r182 | boote | 2004-03-02 03:18:54 -0500 (Tue, 02 Mar 2004) | 6 lines

Possible fix for synchronization "fuzz" problem. Uses a default of 20 msecs
as the maximum synchronization distance that is not accounted for by NTP
error estimates. (This value is in the bwlib.h header file...)

jeff

------------------------------------------------------------------------
r181 | boote | 2004-02-25 16:36:42 -0500 (Wed, 25 Feb 2004) | 4 lines

Adding ref to ntp documentation.

jeff

------------------------------------------------------------------------
r180 | boote | 2004-02-25 12:58:31 -0500 (Wed, 25 Feb 2004) | 2 lines

Adding change log.

------------------------------------------------------------------------
r179 | boote | 2004-02-25 12:56:07 -0500 (Wed, 25 Feb 2004) | 7 lines

mandoc.cgi:
	calls man2html using INC path instead of using full path.

*.html:
	removed 
's - futile....

------------------------------------------------------------------------
r177 | boote | 2004-02-24 18:54:16 -0500 (Tue, 24 Feb 2004) | 4 lines

inc version number.

jeff

------------------------------------------------------------------------
r176 | boote | 2004-02-24 18:44:07 -0500 (Tue, 24 Feb 2004) | 2 lines

corrected syntax error.

------------------------------------------------------------------------
r175 | boote | 2004-02-24 18:37:33 -0500 (Tue, 24 Feb 2004) | 8 lines

endpoint.c:
	modified the error reporting to give more details if the
	clocks look out of sync.
time.c:
	Changed timestamp fetching to use the ntp "offset".

jeff

------------------------------------------------------------------------
r174 | boote | 2004-02-20 20:11:37 -0500 (Fri, 20 Feb 2004) | 13 lines

Disabled hyphenation in url references in manpages. The hypphenation broke
the url stuff I added to man2html to make url's links in html'd man pages.

This all works now, but I can't install it on e2epi because the server
feature I need is not activated. I have made a request to websupport
for that.

To see the man pages for now, take a look at:

http://people.internet2.edu/~boote/bwctl.man

jeff

------------------------------------------------------------------------
r173 | boote | 2004-02-20 12:12:30 -0500 (Fri, 20 Feb 2004) | 5 lines

Fix -O2 bug warren found. (Wasn't initializing the row-count variable when
reading the bwctld.keys file.)

jeff

------------------------------------------------------------------------
r172 | boote | 2004-02-18 19:48:21 -0500 (Wed, 18 Feb 2004) | 5 lines

Remove bold formatting around man page and http refs so man2html will
recognize them.

jeff

------------------------------------------------------------------------
r171 | boote | 2004-02-18 19:39:31 -0500 (Wed, 18 Feb 2004) | 4 lines

Remove other "bold" indicators from man page refs.

jeff

------------------------------------------------------------------------
r170 | boote | 2004-02-18 19:27:11 -0500 (Wed, 18 Feb 2004) | 9 lines

removed "bold" letters for man pages and for http refs so man2html
can more easily match them to turn them into href's.

(still need to do other man pages - still working on cgi script handler
to automate the man pages on the web server, but it is very close now.
At least I have man2html working correctly now.)

jeff

------------------------------------------------------------------------
r168 | boote | 2004-02-17 17:22:53 -0500 (Tue, 17 Feb 2004) | 5 lines

Fixing a bug with command-line arg counting. (caused incorrect usage()
message.)

jeff

------------------------------------------------------------------------
r167 | boote | 2004-02-17 17:03:14 -0500 (Tue, 17 Feb 2004) | 7 lines

bwctl.c: changed error message

README and bwctld.sh:
Adding information on example rc file.

jeff

------------------------------------------------------------------------
r166 | boote | 2004-02-17 16:19:38 -0500 (Tue, 17 Feb 2004) | 5 lines

Modified to support installing of man pages. This took an upgrade of the
autoconf tools. Ugh.

jeff

------------------------------------------------------------------------
r165 | boote | 2004-02-16 18:59:13 -0500 (Mon, 16 Feb 2004) | 4 lines

Adding NTP rant into bwctld.man page.

jeff

------------------------------------------------------------------------
r164 | boote | 2004-02-16 18:38:24 -0500 (Mon, 16 Feb 2004) | 4 lines

Spell checking, and incorporating changes based on Eric's comments.

jeff

------------------------------------------------------------------------
r163 | boote | 2004-02-16 18:00:53 -0500 (Mon, 16 Feb 2004) | 4 lines

Revised based upon test in manual pages.

jeff

------------------------------------------------------------------------
r162 | boote | 2004-02-16 11:07:01 -0500 (Mon, 16 Feb 2004) | 7 lines

bwctld.c: modified error message.

*.man:
	Added acknowledgments section for NSF grant disclaimer.

jeff

------------------------------------------------------------------------
r161 | boote | 2004-02-14 15:13:30 -0500 (Sat, 14 Feb 2004) | 4 lines

Noticed a quirk in the way nroff handled the \\ in my examples and fixed it.

jeff

------------------------------------------------------------------------
r160 | boote | 2004-02-14 14:59:04 -0500 (Sat, 14 Feb 2004) | 18 lines

Man pages now completly written.

For first thing monday morning...

Remaining before release:
	review html and copy back man page content.
	spell check all docs
	setup install rules for man pages
	check complete build process
	test bwctl command-line changes with abilene installation
	build tarball
Then after release:
	add man pages to website
	add abilene measurements link to website
	add "how to test into abilene" document to website

jeff

------------------------------------------------------------------------
r159 | boote | 2004-02-13 19:12:02 -0500 (Fri, 13 Feb 2004) | 5 lines

Adding the last man pages. bwctld.limits.man is not done yet, but it is
getting close.

jeff

------------------------------------------------------------------------
r158 | boote | 2004-02-13 00:42:41 -0500 (Fri, 13 Feb 2004) | 6 lines

bwctld.c	Reordered args printed out from "usage" message.
		Removed unused options...
		Added a validation check for the iperfport range.
bwctld.8	corrected errors
bwctld.conf.5	new

------------------------------------------------------------------------
r157 | boote | 2004-02-11 20:47:20 -0500 (Wed, 11 Feb 2004) | 6 lines

Minor corrections to bwctl.1

Adding bwctld.8

jeff

------------------------------------------------------------------------
r156 | boote | 2004-02-11 18:24:32 -0500 (Wed, 11 Feb 2004) | 4 lines

changing order of args in page and adding Iperf website refs.

jeff

------------------------------------------------------------------------
r155 | boote | 2004-02-11 15:05:59 -0500 (Wed, 11 Feb 2004) | 4 lines

Adding iperf web site reference.

jeff

------------------------------------------------------------------------
r154 | boote | 2004-02-11 14:36:43 -0500 (Wed, 11 Feb 2004) | 4 lines

Ran through spell checker...

jeff

------------------------------------------------------------------------
r153 | boote | 2004-02-11 14:29:07 -0500 (Wed, 11 Feb 2004) | 5 lines

Removed the -K option. passphrase is now implied if -U is used without
the -k option.

jeff

------------------------------------------------------------------------
r152 | boote | 2004-02-11 14:28:20 -0500 (Wed, 11 Feb 2004) | 4 lines

Modified based upon Matt's comments.

jeff

------------------------------------------------------------------------
r151 | boote | 2004-02-10 15:16:50 -0500 (Tue, 10 Feb 2004) | 6 lines

Finished bwctl man page and corrected spelling in index.html.

Now to document the daemon...

jeff

------------------------------------------------------------------------
r150 | boote | 2004-02-10 03:07:42 -0500 (Tue, 10 Feb 2004) | 4 lines

improve help message.

jeff

------------------------------------------------------------------------
r149 | boote | 2004-02-10 03:06:54 -0500 (Tue, 10 Feb 2004) | 4 lines

change address for bug reports.

jeff

------------------------------------------------------------------------
r148 | boote | 2004-02-10 03:05:13 -0500 (Tue, 10 Feb 2004) | 2 lines

checkpoint.

------------------------------------------------------------------------
r147 | boote | 2004-02-09 20:02:10 -0500 (Mon, 09 Feb 2004) | 4 lines

checkpoint bwctl.1

jeff

------------------------------------------------------------------------
r146 | boote | 2004-02-08 19:57:05 -0500 (Sun, 08 Feb 2004) | 4 lines

bwctl.c: changing so remotehost is attached to the -c/-s options

bwctl.1: checkpoint

------------------------------------------------------------------------
r145 | boote | 2004-02-08 17:41:26 -0500 (Sun, 08 Feb 2004) | 2 lines

Adding manpage for aespasswd.

------------------------------------------------------------------------
r144 | boote | 2004-02-07 20:44:53 -0500 (Sat, 07 Feb 2004) | 4 lines

formatting change.

jeff

------------------------------------------------------------------------
r143 | boote | 2004-02-07 20:43:39 -0500 (Sat, 07 Feb 2004) | 4 lines

Adding date heading to index file.

jeff

------------------------------------------------------------------------
r142 | boote | 2004-02-07 20:37:37 -0500 (Sat, 07 Feb 2004) | 4 lines

More text in the overview, added architecture description.

jeff

------------------------------------------------------------------------
r141 | boote | 2004-02-07 02:21:49 -0500 (Sat, 07 Feb 2004) | 4 lines

most of the overview document. man pages tomorrow after some sleep...

jeff

------------------------------------------------------------------------
r140 | boote | 2004-02-06 14:25:26 -0500 (Fri, 06 Feb 2004) | 2 lines

better comment.

------------------------------------------------------------------------
r139 | boote | 2004-02-05 20:23:02 -0500 (Thu, 05 Feb 2004) | 7 lines

Fixed error messages to report time before test results are available.

Added a -q flag for "quiet".
Swapped -v/-V options.
Changed -v so that increasing numbers of -vvvv's mean higher levels of
debugging.

------------------------------------------------------------------------
r138 | boote | 2004-02-05 16:44:16 -0500 (Thu, 05 Feb 2004) | 4 lines

correct some error messages in bwctl.

jeff

------------------------------------------------------------------------
r137 | boote | 2004-01-19 10:53:05 -0500 (Mon, 19 Jan 2004) | 5 lines

Moved policy init so it happens while bwctld is still root.
(Must be this way for the "keys" file to be opened.)

jeff

------------------------------------------------------------------------
r136 | boote | 2004-01-15 18:28:21 -0500 (Thu, 15 Jan 2004) | 4 lines

modified to not do dynamic window calculation for udp tests.

jeff

------------------------------------------------------------------------
r134 | boote | 2004-01-13 12:21:01 -0500 (Tue, 13 Jan 2004) | 4 lines

Corrected some spelling errors.

jeff

------------------------------------------------------------------------
r133 | boote | 2004-01-13 12:17:37 -0500 (Tue, 13 Jan 2004) | 4 lines

Adding "INSTALL" file. (First kernel of documentation on bwctl.)

jeff

------------------------------------------------------------------------
r132 | boote | 2004-01-12 20:18:39 -0500 (Mon, 12 Jan 2004) | 4 lines

updating version number for bwctl for hawaii tracking.

jeff

------------------------------------------------------------------------
r131 | boote | 2004-01-09 15:54:23 -0500 (Fri, 09 Jan 2004) | 24 lines

Addressing two bwctl problems:

1. bwctl control connections were being disconnected unexpectedly.
	Reason: There was an application timeout that closed the
	connection if there was no communication for 30 min. (controltimeout)
	Because bwctl is configured to run tests ~30 min, this means some
	amount of the time there will be no traffic for 30 or more min
	on a given control connection.

	Solution: Change the default value to 7200 and document this
	in the bwctld.conf file with the controltimeout option.

2. Some udp sessions end up being corrupt.
	Reason: First the buffer space between sessions was a little to
	small. Therefore the bwctld would kill the iperf server before
	the job was complete. The iperf server catches SIGINT and
	corrupts the results when it does.
	Solution: Increased the buffer space between sessions by 1 second.
	Then changed the kill of children that are still running at this
	time to a SIGKILL so it will not be caught. This will ensure that
	the invalid data will not be used.

jeff

------------------------------------------------------------------------
r130 | boote | 2004-01-09 00:42:07 -0500 (Fri, 09 Jan 2004) | 4 lines

Forgot to change function prototypes, and removing unused vars.

jeff

------------------------------------------------------------------------
r129 | boote | 2004-01-09 00:30:45 -0500 (Fri, 09 Jan 2004) | 10 lines

Changing the time sync check. The daemon no longer fails to start if the
system clock is not synchronized. (this was problematic for rc boot scripts
since ntp often takes some number of minutes to sync the clock).

Now, to ensure tests start properly, the peer connection does a remote
time check to make sure the system clocks are "close" enough, but does
not require actual ntp synchronization.

jeff

------------------------------------------------------------------------
r128 | boote | 2004-01-05 21:05:59 -0500 (Mon, 05 Jan 2004) | 2 lines

typo in my typo... ugh.

------------------------------------------------------------------------
r127 | boote | 2004-01-05 21:03:27 -0500 (Mon, 05 Jan 2004) | 2 lines

typo...

------------------------------------------------------------------------
r126 | boote | 2004-01-05 20:41:03 -0500 (Mon, 05 Jan 2004) | 4 lines

Oops - passed in key instead of value to a function.

jeff

------------------------------------------------------------------------
r125 | boote | 2004-01-05 20:24:13 -0500 (Mon, 05 Jan 2004) | 2 lines

pseudo-dynamic window code.

------------------------------------------------------------------------
r124 | boote | 2003-12-20 01:34:59 -0500 (Sat, 20 Dec 2003) | 4 lines

Making an error message a little more readable.

jeff

------------------------------------------------------------------------
r123 | boote | 2003-12-20 01:32:05 -0500 (Sat, 20 Dec 2003) | 4 lines

Removed unused -W option to make room for new -W option.

jeff

------------------------------------------------------------------------
r122 | boote | 2003-12-20 01:30:09 -0500 (Sat, 20 Dec 2003) | 2 lines

small typo.

------------------------------------------------------------------------
r121 | boote | 2003-12-20 01:28:34 -0500 (Sat, 20 Dec 2003) | 23 lines

bwctl/*:
	Added -W option that mirrors -w option. -W indicates to use the
	specified window_size only if a dynamic one is unavailable.
bwlib/*:
	Modified the test_spec structure and protocol encoding/decoding
	functions to allow for an additional field for "dynamic"
	window size determination.
bwlib/endpoint.c:
	Had to change the order children were forked to allow the
	peer control communication to happen before forking off the
	run_iperf process. (That way the RTT can be determined as
	part of the dynamic window calculation.)
	** have not actually changed the function to calculate
	a dynamic window - I wanted to test to make sure the rest
	of this quagmire works before adding it. And I'm sorry, I'm too
	tired - so this is going to have to wait, probably until Jan 5.

(I really underestimated what it was going to take to get this working
correctly. And I really, really underestimated what it was going to take
to get the aes passphrases working. It sounded so easy...)

jeff

------------------------------------------------------------------------
r120 | boote | 2003-12-20 00:01:49 -0500 (Sat, 20 Dec 2003) | 4 lines

Remove debugging statements from ReadStopSession.

jeff

------------------------------------------------------------------------
r119 | boote | 2003-12-19 21:06:02 -0500 (Fri, 19 Dec 2003) | 5 lines

Found where cntrl->zero was being corrupted. (I forgot the "send" function
is destructive to the string passed in when encryption is turned on...)

jeff

------------------------------------------------------------------------
r118 | boote | 2003-12-19 19:53:53 -0500 (Fri, 19 Dec 2003) | 4 lines

Hmm... message looks correct, checking cntrl->zero with this one.

jeff

------------------------------------------------------------------------
r117 | boote | 2003-12-19 19:51:12 -0500 (Fri, 19 Dec 2003) | 4 lines

Removing sid debugging and adding a debug for the StopSessions message.

jeff

------------------------------------------------------------------------
r116 | boote | 2003-12-19 18:48:38 -0500 (Fri, 19 Dec 2003) | 5 lines

I think I found the corruption... One of the message offsets was not set
correctly.

jeff

------------------------------------------------------------------------
r115 | boote | 2003-12-19 18:43:39 -0500 (Fri, 19 Dec 2003) | 2 lines

more debug stuff...

------------------------------------------------------------------------
r114 | boote | 2003-12-19 18:31:54 -0500 (Fri, 19 Dec 2003) | 2 lines

more...

------------------------------------------------------------------------
r113 | boote | 2003-12-19 18:19:27 -0500 (Fri, 19 Dec 2003) | 2 lines

more debugging...

------------------------------------------------------------------------
r112 | boote | 2003-12-19 18:04:32 -0500 (Fri, 19 Dec 2003) | 2 lines

more debug statements.

------------------------------------------------------------------------
r111 | boote | 2003-12-19 15:06:31 -0500 (Fri, 19 Dec 2003) | 4 lines

adding debug statement.

jeff

------------------------------------------------------------------------
r110 | boote | 2003-12-19 12:56:49 -0500 (Fri, 19 Dec 2003) | 4 lines

Sigh - the key retrieval for the p2p connection had the same bug.

jeff

------------------------------------------------------------------------
r109 | boote | 2003-12-19 12:40:51 -0500 (Fri, 19 Dec 2003) | 5 lines

Fixed bug that was causing only first 4 bytes of key to be copied.
(Encryption doesn't work as well this way...)

jeff

------------------------------------------------------------------------
r108 | boote | 2003-12-19 11:38:56 -0500 (Fri, 19 Dec 2003) | 4 lines

Duh. forgot to add the -K option to the optstring for getopts in bwctl.

jeff

------------------------------------------------------------------------
r107 | boote | 2003-12-19 03:40:20 -0500 (Fri, 19 Dec 2003) | 9 lines

I2util/*:
	Adding aespasswd into autoconf files.
I2util/aespasswd/*:
	Now works on FreeBSD - need to test Linux.
bwctl/bwctlP.h:
	Clean-up comments.

jeff

------------------------------------------------------------------------
r106 | boote | 2003-12-19 02:57:21 -0500 (Fri, 19 Dec 2003) | 9 lines

I2util/conf.[ch]
	Adding a WriteKeyLine function.
I2util/aespasswd/*
	Adding an aespasswd command for managing keyfiles.
bwctl/bwctl.c
	Making some error messages pretty.

jeff

------------------------------------------------------------------------
r105 | boote | 2003-12-17 23:26:11 -0500 (Wed, 17 Dec 2003) | 6 lines

Now compiles on Linux.

termios suck.

jeff

------------------------------------------------------------------------
r104 | boote | 2003-12-17 22:21:40 -0500 (Wed, 17 Dec 2003) | 4 lines

Fixed compile errors.

jeff

------------------------------------------------------------------------
r103 | boote | 2003-12-17 16:21:13 -0500 (Wed, 17 Dec 2003) | 16 lines

I2util:
Added conf file handling routines, hex encode/decode, md5, readpassphrase...

Basically lots of things that owamp and bwctl will both use.

Modified bwctl to use the I2util versions of these functions.

Modified bwctl to do aeskeys with either a keyfile or a passphrase.

Modified bwctld to do aeskeys with a keyfile.

(These changes have not even been compiled yet since I did this on my
laptop. I will be checking in updates to this after actually testing it.)

jeff

------------------------------------------------------------------------
r102 | boote | 2003-11-27 03:40:57 -0500 (Thu, 27 Nov 2003) | 16 lines

bwctl.[ch]:
	Adding -R option and changing the way test interval schedules
	are computed. The -R option specifies an "alpha" value which is
	the percentage of the "interval" to randomize. Each test will happen
	at +- alpha from a fixed interval from the first start.
	(removed pseudo-poisson schedule)

	Added -V option. (Verbose output.) For now it just makes bwctl
	print an estimate for when the next test interval will begin if
	that period is longer than 3 seconds from "now".

	Added a time-check in so if the clock is off by more than the
	error estimate then bwctl exits.

jeff

------------------------------------------------------------------------
r101 | boote | 2003-11-22 02:56:08 -0500 (Sat, 22 Nov 2003) | 4 lines

Adding fflush to printout of filenames in -p mode.

jeff

------------------------------------------------------------------------
r100 | boote | 2003-11-18 02:52:37 -0500 (Tue, 18 Nov 2003) | 4 lines

modify debug messages to only print for priority == debug.

jeff

------------------------------------------------------------------------
r99 | boote | 2003-11-18 02:48:15 -0500 (Tue, 18 Nov 2003) | 4 lines

corrected truncated bandwidth number.

jeff

------------------------------------------------------------------------
r98 | boote | 2003-11-18 01:56:36 -0500 (Tue, 18 Nov 2003) | 2 lines

syntax errors.

------------------------------------------------------------------------
r97 | boote | 2003-11-18 01:52:10 -0500 (Tue, 18 Nov 2003) | 6 lines

Ok, bit the bullet and wrote a routine for converting test addresses to
peer addresses from the perspective of the endpoints. (My quick fix wasn't
complete enough.)

jeff

------------------------------------------------------------------------
r96 | boote | 2003-11-18 01:10:40 -0500 (Tue, 18 Nov 2003) | 6 lines

Opening connection with SOCK_DGRAM instead of SOCK_STREAM!!!!!!

AGGGHHHHH!

jeff

------------------------------------------------------------------------
r95 | boote | 2003-11-18 00:25:29 -0500 (Tue, 18 Nov 2003) | 4 lines

Changing order of args passed to iperf because it is BRAIN DEAD!

jeff

------------------------------------------------------------------------
r94 | boote | 2003-11-17 21:02:36 -0500 (Mon, 17 Nov 2003) | 3 lines

Add currtime print at end of test to try and figure out why ALRM is going
off...

------------------------------------------------------------------------
r93 | boote | 2003-11-17 20:24:13 -0500 (Mon, 17 Nov 2003) | 4 lines

double is not float.

jeff

------------------------------------------------------------------------
r92 | boote | 2003-11-17 20:21:50 -0500 (Mon, 17 Nov 2003) | 4 lines

Add timestamp information to debug output.

jeff

------------------------------------------------------------------------
r91 | boote | 2003-11-17 18:24:48 -0500 (Mon, 17 Nov 2003) | 4 lines

Adding debug messages.

jeff

------------------------------------------------------------------------
r90 | boote | 2003-11-17 17:37:58 -0500 (Mon, 17 Nov 2003) | 4 lines

Found another place i/o needed to be interruptable. Sigh.

jeff

------------------------------------------------------------------------
r89 | boote | 2003-11-17 04:41:44 -0500 (Mon, 17 Nov 2003) | 5 lines

Found a place I could be missing the SIG_CHLD... This *could* explain
the zombied iperf processes.

jeff

------------------------------------------------------------------------
r88 | boote | 2003-11-17 03:31:55 -0500 (Mon, 17 Nov 2003) | 5 lines

Adding interruptable i/o to client side communications. (The p2p aspect was
causing problems if processes were killed.)

jeff

------------------------------------------------------------------------
r87 | boote | 2003-11-16 21:47:28 -0500 (Sun, 16 Nov 2003) | 4 lines

Fix broken signal mask inherited from perl.

jeff

------------------------------------------------------------------------
r86 | boote | 2003-11-16 21:13:16 -0500 (Sun, 16 Nov 2003) | 6 lines

tweaking schedule generation loop to deal with the case where a connection
is not working. (It was trying again immediately - I want it to wait until
the next scheduled interval.)

jeff

------------------------------------------------------------------------
r85 | boote | 2003-11-16 20:29:40 -0500 (Sun, 16 Nov 2003) | 4 lines

re-enable signal handling so the nanosleep loop can work correctly.

jeff

------------------------------------------------------------------------
r84 | boote | 2003-11-16 19:29:17 -0500 (Sun, 16 Nov 2003) | 2 lines

blah

------------------------------------------------------------------------
r83 | boote | 2003-11-16 00:26:02 -0500 (Sun, 16 Nov 2003) | 5 lines

Adding test for "loopback" to allow a test. "loopback" is implicitly
trusted to an extent.

jeff

------------------------------------------------------------------------
r82 | boote | 2003-11-15 20:31:38 -0500 (Sat, 15 Nov 2003) | 4 lines

adding additional error message to try and determine why v6 tests are failing.

jeff

------------------------------------------------------------------------
r81 | boote | 2003-11-15 02:52:59 -0500 (Sat, 15 Nov 2003) | 4 lines

clean up a bit.

jeff

------------------------------------------------------------------------
r80 | boote | 2003-11-15 02:50:23 -0500 (Sat, 15 Nov 2003) | 2 lines

limits for abilene...

------------------------------------------------------------------------
r79 | boote | 2003-11-14 02:32:29 -0500 (Fri, 14 Nov 2003) | 4 lines

I think it is working!

jeff

------------------------------------------------------------------------
r78 | boote | 2003-11-13 23:16:22 -0500 (Thu, 13 Nov 2003) | 6 lines

Oops was overwriting the recv file with the send file...

also removed more warning messages.

jeff

------------------------------------------------------------------------
r77 | boote | 2003-11-13 21:14:00 -0500 (Thu, 13 Nov 2003) | 5 lines

fix linux specific errors. (gcc complains more on bon-jovi... Perhaps it is
a newer version.)

jeff

------------------------------------------------------------------------
r76 | boote | 2003-11-13 21:04:45 -0500 (Thu, 13 Nov 2003) | 7 lines

adding code to make bwctl save session data in a file and print out filenames.
(It should now work like powstream in this respect.)

I did have it just printing to stdout until now.

jeff

------------------------------------------------------------------------
r75 | boote | 2003-11-07 20:12:43 -0500 (Fri, 07 Nov 2003) | 7 lines

Removing debugging statements.

resetting the itimer for the peer connection and reducing the fuzz factor
now that I've had a chance to experiment with what is needed.

jeff

------------------------------------------------------------------------
r74 | boote | 2003-11-07 16:15:06 -0500 (Fri, 07 Nov 2003) | 4 lines

typo.

jeff

------------------------------------------------------------------------
r73 | boote | 2003-11-07 15:51:00 -0500 (Fri, 07 Nov 2003) | 5 lines

Ugh - I hate when I forget to update the size of the message when I
change it.

jeff

------------------------------------------------------------------------
r72 | boote | 2003-11-07 15:32:45 -0500 (Fri, 07 Nov 2003) | 4 lines

Add command-string that is executed to the data output.

jeff

------------------------------------------------------------------------
r71 | boote | 2003-11-07 15:28:13 -0500 (Fri, 07 Nov 2003) | 4 lines

Fixing a bug in the policy code that allocates port numbers.

jeff

------------------------------------------------------------------------
r70 | boote | 2003-11-07 02:35:16 -0500 (Fri, 07 Nov 2003) | 4 lines

Remove some debugging messages and add some information to another one.

jeff

------------------------------------------------------------------------
r69 | boote | 2003-11-07 01:53:55 -0500 (Fri, 07 Nov 2003) | 4 lines

Changing the name of iperfc to bwctl.

jeff

------------------------------------------------------------------------
r68 | boote | 2003-11-05 19:16:45 -0500 (Wed, 05 Nov 2003) | 8 lines

Set iperf port to 5001-5004
allow iperfcmd to default

iperfc.c:
change time into future to one second.

jeff

------------------------------------------------------------------------
r67 | boote | 2003-11-04 19:11:16 -0500 (Tue, 04 Nov 2003) | 7 lines

Logic error in scheduling loop (looking for next slot). In some cases
the pointer into the linked list was not incremented to the next node
which caused it to loop forever. (This happened if concurrent requests
came in.)

jeff

------------------------------------------------------------------------
r66 | boote | 2003-11-04 18:01:58 -0500 (Tue, 04 Nov 2003) | 8 lines

endpoint.c:
	Fix bug - iperf was trying to contact the wrong address.

sapi.c:
	remove extra fuzz factor.

jeff

------------------------------------------------------------------------
r65 | boote | 2003-11-04 17:58:41 -0500 (Tue, 04 Nov 2003) | 4 lines

bug fix for multiplier factors.

jeff

------------------------------------------------------------------------
r64 | boote | 2003-11-03 18:28:07 -0500 (Mon, 03 Nov 2003) | 4 lines

Make fuzz factor huge since it doesn't seem to be helping...

jeff

------------------------------------------------------------------------
r63 | boote | 2003-11-03 18:25:31 -0500 (Mon, 03 Nov 2003) | 5 lines

Sigh, iperf takes a long time to start up. Add a "fuzz" factor to ensure the
server starts before the client.

jeff

------------------------------------------------------------------------
r62 | boote | 2003-11-03 17:02:29 -0500 (Mon, 03 Nov 2003) | 4 lines

Fix command-line args to iperf.

jeff

------------------------------------------------------------------------
r61 | boote | 2003-11-03 16:32:19 -0500 (Mon, 03 Nov 2003) | 4 lines

Modify to run real iperf instead of my test perl script.

jeff

------------------------------------------------------------------------
r60 | boote | 2003-11-03 16:21:52 -0500 (Mon, 03 Nov 2003) | 4 lines

Fixed syntax errors.

jeff

------------------------------------------------------------------------
r59 | boote | 2003-11-03 16:01:21 -0500 (Mon, 03 Nov 2003) | 8 lines

recrafted wait loop for peer2peer connection that should not cause the process
to exit if the StopSession message from the peer is "success".

(Need to test this still - I'm using cvs to transfer the diffs around to
my test hosts.)

jeff

------------------------------------------------------------------------
r58 | boote | 2003-10-31 18:00:24 -0500 (Fri, 31 Oct 2003) | 4 lines

Cause newly forked process to print its pid if -w is specified.

jeff

------------------------------------------------------------------------
r57 | boote | 2003-10-31 17:59:43 -0500 (Fri, 31 Oct 2003) | 6 lines

Add check for WIFSTOPPED() for child process so children processes that
are currently being debugged don't look like they have exited to the
parent process management code.

jeff

------------------------------------------------------------------------
r56 | boote | 2003-10-31 01:38:39 -0500 (Fri, 31 Oct 2003) | 6 lines

Modified more state for the grandchild... Needed to modify the cntrl
record for the tsess to point at the rcntrl pointer instead of the cntrl
pointer. (rcntrl is the p2p connection, cntrl goes to the client.)

jeff

------------------------------------------------------------------------
r55 | boote | 2003-10-31 01:07:23 -0500 (Fri, 31 Oct 2003) | 4 lines

Removed more policy functions from the grandchild...

jeff

------------------------------------------------------------------------
r54 | boote | 2003-10-30 12:12:47 -0500 (Thu, 30 Oct 2003) | 4 lines

Apply "fuzz" factor to the "end" of the test so it is not pre-maturely killed.

jeff

------------------------------------------------------------------------
r53 | boote | 2003-10-29 18:58:43 -0500 (Wed, 29 Oct 2003) | 4 lines

Remove debugging constant.

jeff

------------------------------------------------------------------------
r52 | boote | 2003-10-29 18:19:45 -0500 (Wed, 29 Oct 2003) | 4 lines

AAGGHHH! Forgot a single ntohl() around the "duration" field of the message.

jeff

------------------------------------------------------------------------
r51 | boote | 2003-10-29 17:57:27 -0500 (Wed, 29 Oct 2003) | 4 lines

Modifying policy function for p2p.

jeff

------------------------------------------------------------------------
r50 | boote | 2003-10-29 12:45:59 -0500 (Wed, 29 Oct 2003) | 4 lines

Another fix related to the "status" message.

jeff

------------------------------------------------------------------------
r49 | boote | 2003-10-29 11:50:54 -0500 (Wed, 29 Oct 2003) | 5 lines

Fixed an endpoint status bug. This has been causing the endpoint to be killed
before it even really gets started.

jeff

------------------------------------------------------------------------
r48 | boote | 2003-10-28 17:52:09 -0500 (Tue, 28 Oct 2003) | 2 lines

debugging...

------------------------------------------------------------------------
r47 | boote | 2003-10-28 17:00:13 -0500 (Tue, 28 Oct 2003) | 6 lines

Fixes remote address check.

Added more debugging code.

jeff

------------------------------------------------------------------------
r46 | boote | 2003-10-24 17:46:18 -0400 (Fri, 24 Oct 2003) | 5 lines

changing accept interrupt handler to exit the process on CHLD in addition
to TERM/HUP.

jeff

------------------------------------------------------------------------
r45 | boote | 2003-10-24 15:08:26 -0400 (Fri, 24 Oct 2003) | 4 lines

Corrected bug in EndpointStatus. (Fixed this bug in owamp too!)

jeff

------------------------------------------------------------------------
r44 | boote | 2003-10-24 13:03:58 -0400 (Fri, 24 Oct 2003) | 9 lines

Adding debug message.

Eric,
I'm going through cvs to distribute code changes from one test
endpoint to the other - so you should probably just ignore most of these
messages.

jeff

------------------------------------------------------------------------
r43 | boote | 2003-10-23 18:06:37 -0400 (Thu, 23 Oct 2003) | 6 lines

using ntohs instead of htons. (not sure that should matter...) Also adding
a statement to print out the port number of the receive side to try and
figure out why the end-2-end connection is not being made.

jeff

------------------------------------------------------------------------
r42 | boote | 2003-10-23 17:17:08 -0400 (Thu, 23 Oct 2003) | 4 lines

Found the bug that was putting the "state" variable off.

jeff

------------------------------------------------------------------------
r41 | boote | 2003-10-23 16:24:40 -0400 (Thu, 23 Oct 2003) | 4 lines

tweaking the timing to make it easier to see the progression of events.

jeff

------------------------------------------------------------------------
r40 | boote | 2003-10-23 15:08:48 -0400 (Thu, 23 Oct 2003) | 2 lines

typo...

------------------------------------------------------------------------
r39 | boote | 2003-10-23 15:06:17 -0400 (Thu, 23 Oct 2003) | 4 lines

Corrected addresses for peer communication.

jeff

------------------------------------------------------------------------
r38 | boote | 2003-10-22 20:23:37 -0400 (Wed, 22 Oct 2003) | 4 lines

Adding some debug info.

jeff

------------------------------------------------------------------------
r37 | boote | 2003-10-22 19:42:03 -0400 (Wed, 22 Oct 2003) | 5 lines

correcting sigprocmask call. Had SIG_BLOCK where I wanted SIG_SETMASK. (Ugh.
This is what I get for copying code without thinking about it enough!)

jeff

------------------------------------------------------------------------
r36 | boote | 2003-10-22 19:21:31 -0400 (Wed, 22 Oct 2003) | 4 lines

wrong index for EndSessions call.

jeff

------------------------------------------------------------------------
r35 | boote | 2003-10-22 17:43:25 -0400 (Wed, 22 Oct 2003) | 4 lines

syntax errors...

jeff

------------------------------------------------------------------------
r34 | boote | 2003-10-22 17:39:06 -0400 (Wed, 22 Oct 2003) | 5 lines

modified so an error message prints out if the clock is unsync even if
allowunsync is set. (This is not a good way to run!)

jeff

------------------------------------------------------------------------
r33 | boote | 2003-10-22 17:37:28 -0400 (Wed, 22 Oct 2003) | 5 lines

Modified code to use an allowunsync paramater to determine if the application
exits or continues on an unsyncronized clock.

jeff

------------------------------------------------------------------------
r32 | boote | 2003-10-22 12:11:41 -0400 (Wed, 22 Oct 2003) | 4 lines

Add a check for unsync in NTP initialization.

jeff

------------------------------------------------------------------------
r31 | boote | 2003-10-22 11:35:31 -0400 (Wed, 22 Oct 2003) | 5 lines

Fixed syntax errors. (pervious check-in was from my laptop so I didn't get
a chance to compile.)

jeff

------------------------------------------------------------------------
r30 | boote | 2003-10-22 11:13:39 -0400 (Wed, 22 Oct 2003) | 7 lines

Modified how the local address is determined. (If the src address was not
being specified, the test connection was assuming localhost due to an owamp
assumption. Now getsockname is used on the remote control connection to
determine a good address to use for the local host.)

jeff

------------------------------------------------------------------------
r29 | boote | 2003-10-17 13:23:54 -0400 (Fri, 17 Oct 2003) | 5 lines

Just checkpointing changes I made while flying. Have not even tried compiling
yet. (Monday - I'm going to go enjoy the sunshine on my bike right now!)

jeff

------------------------------------------------------------------------
r28 | boote | 2003-10-14 21:03:52 -0400 (Tue, 14 Oct 2003) | 4 lines

Add ntohs macro for recv port number.

jeff

------------------------------------------------------------------------
r27 | boote | 2003-10-14 12:47:45 -0400 (Tue, 14 Oct 2003) | 4 lines

Remove compiler warning.

jeff

------------------------------------------------------------------------
r26 | boote | 2003-10-14 12:45:28 -0400 (Tue, 14 Oct 2003) | 4 lines

Fixed sid copy in policy code.

jeff

------------------------------------------------------------------------
r25 | boote | 2003-10-14 11:38:08 -0400 (Tue, 14 Oct 2003) | 4 lines

Corrected sid copy in session request.

jeff

------------------------------------------------------------------------
r24 | boote | 2003-10-13 19:20:24 -0400 (Mon, 13 Oct 2003) | 4 lines

Ugh. Initialize variables to NULL.

jeff

------------------------------------------------------------------------
r23 | boote | 2003-10-13 17:50:14 -0400 (Mon, 13 Oct 2003) | 4 lines

Fix double-free error.

jeff

------------------------------------------------------------------------
r22 | boote | 2003-10-13 15:33:19 -0400 (Mon, 13 Oct 2003) | 4 lines

Fixed some bugs in the schedule generation.

jeff

------------------------------------------------------------------------
r21 | boote | 2003-10-13 12:39:15 -0400 (Mon, 13 Oct 2003) | 4 lines

Added poisson interval to client loop.

jeff

------------------------------------------------------------------------
r20 | boote | 2003-10-11 12:45:30 -0400 (Sat, 11 Oct 2003) | 12 lines

Fixed a bug in the TestSessionRequest message read/write functions. I
had added a field in this message, and forgot to modify the offset for the
v4 version of the address reading/writing. Therefore the addresses for the
test were not being communicated properly. It looks like this part of the
protocol is now working correctly. (I have not been able to completely test
due to the fact that my development system is currently behind a NAT...)

(My initial tests were trying to contact a host in Frankfurt due to the way
the addresses were corrupted. Oops.)

jeff

------------------------------------------------------------------------
r19 | boote | 2003-10-11 00:32:34 -0400 (Sat, 11 Oct 2003) | 4 lines

Fixed a couple of bugs.

jeff

------------------------------------------------------------------------
r18 | boote | 2003-10-10 18:01:37 -0400 (Fri, 10 Oct 2003) | 5 lines

daemon is complete. I have not even tried running any tests with it at
all yet. It does compile however. Attempting tests now.

jeff

------------------------------------------------------------------------
r17 | boote | 2003-10-10 10:14:43 -0400 (Fri, 10 Oct 2003) | 5 lines

Modified the time estimates for starting a session from the client perspective.
(i.e. the algortithm for determining a good "start" time to request.)

jeff

------------------------------------------------------------------------
r16 | boote | 2003-10-08 19:39:59 -0400 (Wed, 08 Oct 2003) | 6 lines

Fixed limits are done, but not tested.

Global limits, and the global schedule are about half way there.

jeff

------------------------------------------------------------------------
r15 | boote | 2003-10-06 19:19:07 -0400 (Mon, 06 Oct 2003) | 7 lines

Getting closer.... The last major piece that needs to be written is the
code that actually does the scheduling and determines if a given test
is allowed. (I am going to shortcut this substantially by basically allowing
any test.)

jeff

------------------------------------------------------------------------
r14 | boote | 2003-10-05 00:53:05 -0400 (Sun, 05 Oct 2003) | 4 lines

Yet a little farther...

jeff

------------------------------------------------------------------------
r13 | boote | 2003-10-04 21:04:39 -0400 (Sat, 04 Oct 2003) | 7 lines

checkpoint...

doesn't compile but I've written most of the code that actually runs the
endpoint. (swaps results with the other server and exec's iperf)

jeff

------------------------------------------------------------------------
r12 | boote | 2003-10-03 18:51:09 -0400 (Fri, 03 Oct 2003) | 5 lines

Actually compiles at the moment - although there are still lots of stubs
for the test endpoint processes and the scheduling.

jeff

------------------------------------------------------------------------
r11 | boote | 2003-10-01 19:36:34 -0400 (Wed, 01 Oct 2003) | 7 lines

checkpoint.

Ok - all the "fluff" is done. Now it is time to really get to it and start
writing the part that forks off the tests.

jeff

------------------------------------------------------------------------
r10 | boote | 2003-09-30 18:50:24 -0400 (Tue, 30 Sep 2003) | 8 lines

check-point.

client code path is complete. (But not as functional as I would like.)

Server path still needs work, but I am getting there.

jeff

------------------------------------------------------------------------
r9 | boote | 2003-09-29 12:21:43 -0400 (Mon, 29 Sep 2003) | 5 lines

check-point. The whole thing actually compiles at the moment. (although there
is not enough functionality to test yet.)

jeff

------------------------------------------------------------------------
r8 | boote | 2003-09-26 19:17:40 -0400 (Fri, 26 Sep 2003) | 2 lines

checkpoint. Getting there...

------------------------------------------------------------------------
r7 | boote | 2003-09-25 18:14:46 -0400 (Thu, 25 Sep 2003) | 2 lines

checkpoint

------------------------------------------------------------------------
r6 | boote | 2003-09-24 18:54:10 -0400 (Wed, 24 Sep 2003) | 2 lines

checkpoint

------------------------------------------------------------------------
r5 | boote | 2003-09-22 19:21:43 -0400 (Mon, 22 Sep 2003) | 5 lines

checkpoint. (Much of the actual client is complete - moving down into the
library to fill in the details.) Have not started the server.

jeff

------------------------------------------------------------------------
r4 | boote | 2003-09-19 17:23:56 -0400 (Fri, 19 Sep 2003) | 2 lines

check-point.

------------------------------------------------------------------------
r3 | boote | 2003-09-18 17:19:16 -0400 (Thu, 18 Sep 2003) | 2 lines

checkpoint.

------------------------------------------------------------------------
r2 | boote | 2003-09-16 16:31:47 -0400 (Tue, 16 Sep 2003) | 5 lines

Initial ci of iperfc code. (This is mostly a template still - very little real
code yet.)

jeff

------------------------------------------------------------------------
r1 | (no author) | 2003-09-16 16:31:47 -0400 (Tue, 16 Sep 2003) | 1 line

New repository initialized by cvs2svn.
------------------------------------------------------------------------
